<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TEST - Chat with Carrie</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { 
      font-family:system-ui; 
      background:linear-gradient(#050011,#000); 
      color:#eae6ff; 
      min-height:100vh;
      overflow-x:hidden;
    }
    
    /* Avatar - FLOATS, doesn't block */
    #floatingAvatar { position:fixed; z-index:9999; pointer-events:none; }
    #avatarContainer { position:relative; width:480px; height:800px; pointer-events:auto; cursor:grab; transform-origin:center; }
    #baseImg { position:absolute; width:100%; height:100%; object-fit:contain; left:50%; transform:translateX(-50%); }
    #overlayHost { position:absolute; inset:0; pointer-events:none; }
    
    /* Panels - FIXED position */
    .items-panel { 
      position:fixed !important; 
      left:20px !important; 
      top:80px !important; 
      width:320px !important; 
      max-height:calc(100vh - 100px); 
      background:rgba(10,2,26,.95); 
      border:1px solid rgba(124,58,237,.6); 
      border-radius:16px; 
      padding:1rem; 
      overflow-y:auto; 
      z-index:8888 !important; 
    }
    
    .chat-panel { 
      position:fixed !important; 
      right:20px !important; 
      top:80px !important; 
      width:400px !important; 
      max-height:calc(100vh - 100px); 
      background:rgba(10,2,26,.95); 
      border:1px solid rgba(124,58,237,.6); 
      border-radius:16px; 
      padding:1.5rem; 
      overflow-y:auto; 
      z-index:8888 !important; 
    }
    
    .btn-icon { 
      width:32px; height:32px; border-radius:50%; 
      background:rgba(15,23,42,.9); color:#fff; 
      border:1px solid rgba(124,58,237,.6); 
      cursor:pointer; display:flex; align-items:center; justify-content:center; 
    }
    
    .coin-badge { 
      background:linear-gradient(135deg,#fbbf24,#f59e0b); 
      color:#000; padding:0.4rem 0.7rem; border-radius:999px; 
      display:inline-block; font-weight:700; 
    }
    
    .seg-btn { 
      padding:0.4rem 0.7rem; border-radius:999px; 
      border:1px solid rgba(124,58,237,.6); 
      background:rgba(15,23,42,.85); color:#e5e7eb; cursor:pointer; 
    }
    .seg-btn.active { 
      background:linear-gradient(135deg,#7c3aed,#a855f7); 
      color:#fff; 
    }
  </style>
</head>
<body>

  <!-- TEST: Can you see this text? -->
  <div style="position:fixed; top:10px; left:50%; transform:translateX(-50%); background:red; color:white; padding:10px; z-index:99999;">
    ğŸ”´ TEST MODE - Can you see this red box?
  </div>

  <!-- Floating Avatar -->
  <div id="floatingAvatar" style="left:50%; top:50%; transform:translate(-50%,-50%);">
    <div id="avatarContainer">
      <img id="baseImg" src="assets/images/base/female/base_female_light.png?v=15" alt="Carrie">
      <div id="overlayHost"></div>
      <div style="position:absolute; top:10px; right:10px; display:flex; flex-direction:column; gap:5px; pointer-events:auto;">
        <button id="zoomIn" class="btn-icon">â•</button>
        <button id="zoomOut" class="btn-icon">â–</button>
        <button id="resetPos" class="btn-icon">ğŸ”„</button>
      </div>
    </div>
  </div>

  <!-- Top Bar -->
  <div style="position:fixed; top:40px; left:50%; transform:translateX(-50%); z-index:9999;">
    <a href="coin-shop.html" style="background:linear-gradient(135deg,#fbbf24,#f59e0b); color:#000; padding:0.5rem 1rem; border-radius:999px; font-weight:700; text-decoration:none;">
      ğŸª™ Coin Shop
    </a>
  </div>

  <!-- LEFT PANEL - Items -->
  <div class="items-panel">
    <h3 style="color:#a855f7; margin-bottom:1rem;">ğŸ“¦ Items Panel (LEFT)</h3>
    <div><span class="coin-badge">ğŸ’° <span id="coinDisplay">0</span></span></div>
    <div style="margin-top:1rem;">
      <div style="font-size:0.8rem; color:#a855f7; margin-bottom:0.5rem;">GENDER</div>
      <div style="display:flex; gap:0.5rem;">
        <button data-gender="female" class="seg-btn active">â™€</button>
        <button data-gender="male" class="seg-btn">â™‚</button>
      </div>
    </div>
    <div style="margin-top:1rem;">
      <div style="font-size:0.8rem; color:#a855f7; margin-bottom:0.5rem;">SKIN</div>
      <div id="skinToneButtons" style="display:flex; gap:0.5rem;"></div>
    </div>
    <div id="ownedSection" style="display:none; margin-top:1rem;">
      <div style="color:#10b981;">âœ¨ Collection <span id="ownedCount"></span></div>
      <div id="ownedItemsGrid"></div>
    </div>
    <div style="margin-top:1rem;">
      <div style="color:#888;">ğŸ›ï¸ Shop <span id="shopCount"></span></div>
      <div id="shopItemsGrid"></div>
    </div>
  </div>

  <!-- RIGHT PANEL - Chat -->
  <div class="chat-panel">
    <h3 style="color:#a855f7; margin-bottom:1rem;">ğŸ’¬ Chat Panel (RIGHT)</h3>
    <div style="display:flex; gap:0.5rem; margin-bottom:1rem;">
      <button id="modePro" class="seg-btn active">Pro</button>
      <button id="modeFun" class="seg-btn">Fun</button>
    </div>
    <div id="chatStream" style="height:200px; background:rgba(5,10,30,.6); border-radius:8px; padding:0.5rem; overflow-y:auto; margin-bottom:1rem;"></div>
    <textarea id="chatInput" placeholder="Type..." rows="3" style="width:100%; background:rgba(5,10,30,.6); border:1px solid rgba(124,58,237,.4); border-radius:8px; padding:0.5rem; color:#e5e7eb; resize:vertical;"></textarea>
    <div style="display:flex; gap:0.5rem; margin-top:0.5rem;">
      <button id="sendBtn" style="flex:1; background:linear-gradient(135deg,#7c3aed,#a855f7); border:none; color:#fff; padding:0.5rem; border-radius:8px; cursor:pointer;">Send</button>
      <button id="clearChat" style="background:rgba(124,58,237,.3); border:none; color:#fff; padding:0.5rem; border-radius:8px; cursor:pointer;">ğŸ—‘</button>
    </div>
  </div>

  <script src="carrie-chat-data.js"></script>
  <script src="carrie-chat.js"></script>
</body>
</html>
