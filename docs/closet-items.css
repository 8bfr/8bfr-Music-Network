/* =============================
   Root Variables
   ============================= */
:root {
    --ring: rgba(124,58,237,.55);
    --glass: rgba(12,6,24,.80);
}

/* =============================
   HTML / Body
   ============================= */
html, body { scroll-behavior: smooth; }

body {
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
    background:
        radial-gradient(1200px 600px at 10% -10%, rgba(124,58,237,.30), transparent 60%),
        radial-gradient(900px 400px at 110% 10%, rgba(0,217,255,.22), transparent 60%),
        linear-gradient(#050011,#000);
    color: #eae6ff;
    margin: 0;
    min-height: 100vh;
    overflow-x: hidden;
}

/* =============================
   Earring Position Variables
   ============================= */
body[data-gender="female"][data-skin="light"] {
    --ear-left-x: -6%;
    --ear-left-y: -6%;
    --ear-right-x: 6%;
    --ear-right-y: -20%;
    --ear-scale: 1;
}
body[data-gender="female"][data-skin="dark"] {
    --ear-left-x: 0%;
    --ear-left-y: 0%;
    --ear-right-x: 0%;
    --ear-right-y: 0%;
    --ear-scale: 1;
}

/* =============================
   Header
   ============================= */
header {
    position: relative;
    z-index: 5;
    background: rgba(10,0,25,.96);
    border-bottom: 1px solid rgba(124,58,237,.5);
    box-shadow: 0 18px 40px rgba(0,0,0,.7);
}

/* =============================
   Shell
   ============================= */
.shell {
    border-radius: 20px;
    border: 1px solid rgba(129,140,248,.6);
    background:
        radial-gradient(circle at 0 0,rgba(76,29,149,.40),transparent 60%),
        radial-gradient(circle at 100% 0,rgba(14,165,233,.22),transparent 60%),
        rgba(10,6,30,.96);
    box-shadow: 0 18px 50px rgba(0,0,0,.8);
}

/* =============================
   Preview frame + dressing room
   ============================= */
#closetPreviewFrame {
    width: 100%;
    max-width: 1100px;
    margin: 0 auto;
    border-radius: 18px;
    border: 1px solid rgba(148,163,255,0.55);
    overflow: hidden;
    height: 800px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-image: url("assets/images/closet/dressingroom.png?v=15");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
}

#closetPreviewInner {
    position: relative;
    width: 100%;
    max-width: 480px;
    height: 100%;
    transform: translateY(30px);
}

#closetBaseImg {
    position: absolute;
    inset: 0;
    height: 100%;
    width: auto;
    object-fit: cover;
    display: block;
    z-index: 1;
    left: 50%;
    transform: translateX(-50%);
    filter: drop-shadow(0 0 3px #000);
}

/* =============================
   Base Avatar Width/Height Controls
   ============================= */
body[data-gender="female"][data-skin="light"] {
    --base-width: .89;
    --base-height: .99;
}
body[data-gender="female"][data-skin="dark"] {
    --base-width: .63;
    --base-height: .96;
}
body[data-gender="male"][data-skin="light"] {
    --base-width: 1.00;
    --base-height: 1.00;
}
body[data-gender="male"][data-skin="dark"] {
    --base-width: 0.96;
    --base-height: 1.00;
}

body[data-skin] #closetBaseImg {
    transform: translateX(-50%) scaleX(var(--base-width, 1)) scaleY(var(--base-height, 1));
}

/* =============================
   Overlay Drop Shadows
   ============================= */
#closetOverlayHost img {
    filter: drop-shadow(0 0 2px #000);
}

#closetOverlayHost {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 2;
}

.layer-overlay {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    pointer-events: none;
    image-rendering: auto;
    /* Earring transforms */
}
.item-f_jewel_ears.layer-left {
    transform: translate(var(--ear-left-x), var(--ear-left-y)) scale(var(--ear-scale));
}
.item-f_jewel_ears.layer-right {
    transform: translate(var(--ear-right-x), var(--ear-right-y)) scale(var(--ear-scale));
}

/* SIDE-SPECIFIC OVERRIDES */
.layer-overlay {
    --scale-left-light: var(--scale-light);
    --offset-x-left-light: var(--offset-x-light);
    --offset-y-left-light: var(--offset-y-light);
    --scale-left-dark: var(--scale-dark);
    --offset-x-left-dark: var(--offset-x-dark);
    --offset-y-left-dark: var(--offset-y-dark);
    --scale-right-light: var(--scale-light);
    --offset-x-right-light: var(--offset-x-light);
    --offset-y-right-light: var(--offset-y-light);
    --scale-right-dark: var(--scale-dark);
    --offset-x-right-dark: var(--offset-x-dark);
    --offset-y-right-dark: var(--offset-y-dark);
    --scale: 1;
    --offset-x: 0%;
    --offset-y: 0%;
    --scale-light: var(--scale);
    --offset-x-light: var(--offset-x);
    --offset-y-light: var(--offset-y);
    --scale-dark: var(--scale);
    --offset-x-dark: var(--offset-x);
    --offset-y-dark: var(--offset-y);
    --scale-use: var(--scale);
    --offset-x-use: var(--offset-x);
    --offset-y-use: var(--offset-y);
    transform: scale(var(--scale-use)) translateX(var(--offset-x-use)) translateY(var(--offset-y-use));
}

/* Skin-specific selection */
body[data-skin="light"] .layer-overlay {
    --scale-use: var(--scale-light);
    --offset-x-use: var(--offset-x-light);
    --offset-y-use: var(--offset-y-light);
}
body[data-skin="dark"] .layer-overlay {
    --scale-use: var(--scale-dark);
    --offset-x-use: var(--offset-x-dark);
    --offset-y-use: var(--offset-y-dark);
}

body[data-skin="light"] .layer-left {
    --scale-use: var(--scale-left-light);
    --offset-x-use: var(--offset-x-left-light);
    --offset-y-use: var(--offset-y-left-light);
}
body[data-skin="light"] .layer-right {
    --scale-use: var(--scale-right-light);
    --offset-x-use: var(--offset-x-right-light);
    --offset-y-use: var(--offset-y-right-light);
}
body[data-skin="dark"] .layer-left {
    --scale-use: var(--scale-left-dark);
    --offset-x-use: var(--offset-x-left-dark);
    --offset-y-use: var(--offset-y-left-dark);
}
body[data-skin="dark"] .layer-right {
    --scale-use: var(--scale-right-dark);
    --offset-x-use: var(--offset-x-right-dark);
    --offset-y-use: var(--offset-y-right-dark);
}

/* =============================
   Pill Tags, Buttons, Closet Cards
   ============================= */
.pill-tag {
    display: inline-flex;
    align-items: center;
    gap: .25rem;
    font-size: .7rem;
    border-radius: 999px;
    padding: .15rem .6rem;
    border: 1px solid rgba(129,140,248,.85);
    background: rgba(15,23,42,.9);
    text-transform: uppercase;
    letter-spacing: .08em;
}
.pill-tag-soft {
    border-color: rgba(147,197,253,.55);
    background: rgba(15,23,42,.85);
}
.seg-btn {
    font-size: 11px;
    padding: 4px 10px;
    border-radius: 999px;
    border: 1px solid rgba(148,163,255,.45);
    background: rgba(15,23,42,.85);
    cursor: pointer;
    color: #e5e7eb;
    transition: all .12s ease;
}
.seg-btn.active {
    border-color: #a855f7;
    background: linear-gradient(135deg,#7c3aed,#a855f7);
    color: #fff;
    box-shadow: 0 0 0 1px rgba(129,140,248,.7),0 0 16px rgba(168,85,247,.65);
}
.seg-btn:hover {
    background: rgba(30,64,175,.85);
}
.tab-btn {
    font-size: 11px;
    padding: 4px 10px;
    border-radius: 999px;
    border: 1px solid rgba(148,163,255,.35);
    background: rgba(15,23,42,.8);
    cursor: pointer;
    color: #e5e7eb;
    transition: all .12s ease;
    white-space: nowrap;
}
.tab-btn.active {
    border-color: #38bdf8;
    background: radial-gradient(circle at 0 0,#38bdf8,#6366f1);
    color: #0f172a;
}
.closet-item-card {
    border-radius: 12px;
    border: 1px solid rgba(148,163,255,.4);
    background: rgba(15,23,42,.96);
    padding: .45rem .55rem;
    text-align: left;
    cursor: pointer;
    transition: transform .08s ease, box-shadow .08s ease, border-color .08s ease, background .08s ease;
    display: flex;
    gap: .45rem;
    align-items: center;
}
.closet-item-card:hover {
    transform: translateY(-1px);
    border-color: #a855f7;
    box-shadow: 0 0 0 1px rgba(129,140,248,.85),0 0 18px rgba(124,58,237,.55);
    background: rgba(30,64,175,.85);
}
.closet-item-card.active {
    border-color: #22c55e;
    box-shadow: 0 0 0 1px rgba(22,163,74,.8),0 0 18px rgba(22,163,74,.7);
    background: rgba(5,46,22,.92);
}
.closet-item-thumb {
    width: 44px;
    height: 44px;
    border-radius: 10px;
    border: 1px solid rgba(148,163,255,.4);
    background: #020617;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0;
}
.closet-item-thumb img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
}
#closetError {
    border-radius: 999px;
    border: 1px solid rgba(248,113,113,.8);
    background: rgba(127,29,29,.90);
    padding: .4rem .75rem;
    font-size: 11px;
}
#closetEmpty {
    border-radius: 999px;
    border: 1px dashed rgba(148,163,255,.5);
    background: rgba(15,23,42,.86);
    padding: .4rem .75rem;
    font-size: 11px;
}

/* =============================
   Hide Global Carrie avatar/bubbles
   ============================= */
#bubbleStack,
#bubble-top-single,
#carrieWrap,
#globalAvatarSwitch,
#carrieToggleBar,
.carrie-toggle-bar,
#carrieModeButtons {
    display: none !important;
}

/* =============================
   Responsive
   ============================= */
@media (max-width:768px) {
    .shell { border-radius: 16px; }
    #closetPreviewFrame {
        max-width: 100%;
        height: 650px;
        padding: 10px 0;
        background-size: cover;
        background-position: center;
    }
    #closetPreviewInner {
        max-width: 360px;
        height: 100%;
    }
}

/* =============================
   Per-item adjustments (Hair, Eyes, Shoes, Tops, Bottoms, Jewelry)
   ============================= */
/* All of your hair, shoes, eyes, tops, bottoms, jewelry code goes here exactly as in your style block */
