<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chat with Carrie ‚Äî 8BFR</title>
  <link rel="icon" href="assets/images/favicon.png?v=15" />
  <style>
    :root {
      --ring: rgba(124,58,237,.55);
      --glass: rgba(12,6,24,.80);
    }
  
    html, body { scroll-behavior:smooth; }
  
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(124,58,237,.30), transparent 60%),
        radial-gradient(900px 400px at 110% 10%, rgba(0,217,255,.22), transparent 60%),
        linear-gradient(#050011,#000);
      color:#eae6ff;
      margin:0;
      min-height:100vh;
      overflow-x:hidden;
    }
  
    header {
      position:relative;
      z-index:5;
      background:rgba(10,0,25,.96);
      border-bottom:1px solid rgba(124,58,237,.5);
      box-shadow:0 18px 40px rgba(0,0,0,.7);
    }
  
    .shell {
      border-radius:20px;
      border:1px solid rgba(129,140,248,.6);
      background:
        radial-gradient(circle at 0 0,rgba(76,29,149,.40),transparent 60%),
        radial-gradient(circle at 100% 0,rgba(14,165,233,.22),transparent 60%),
        rgba(10,6,30,.96);
      box-shadow:0 18px 50px rgba(0,0,0,.8);
    }
  
    #closetPreviewFrame {
      width: 100%;
      max-width: 1100px;
      margin: 0 auto;
      border-radius: 18px;
      border: 1px solid rgba(148,163,255,0.55);
      overflow: hidden;
      height: 800px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-image: url("assets/images/closet/dressingroom.png?v=15");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      position: relative;
    }
  
    #closetPreviewInner {
      position: relative;
      width: 100%;
      max-width: 480px;
      height: 100%;
      transform: translateY(30px);
    }
  
    #closetBaseImg {
      position: absolute;
      inset: 0;
      height: 100%;
      width: auto;
      object-fit: cover;
      display: block;
      z-index: 1;
      left: 50%;
      transform: translateX(-50%);
      filter: drop-shadow(0 0 3px #000);
    }

    body[data-gender="female"][data-skin="light"]{
      --base-width: .89;
      --base-height: .99;
    }

    body[data-gender="female"][data-skin="dark"]{
      --base-width: .63;
      --base-height: .96;
    }

    body[data-gender="male"][data-skin="light"]{
      --base-width: 1.00;
      --base-height: 1.00;
    }

    body[data-gender="male"][data-skin="dark"]{
      --base-width: 0.96;
      --base-height: 1.00;
    }

    body[data-skin] #closetBaseImg{
      transform: translateX(-50%) scaleX(var(--base-width, 1)) scaleY(var(--base-height, 1));
    }
  
    #closetOverlayHost img {
      filter: drop-shadow(0 0 2px #000);
    }
  
    #closetOverlayHost {
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index:2;
    }
  
    .layer-overlay {
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:contain;
      pointer-events:none;
      image-rendering:auto;
      --scale: 1;
      --offset-x: 0%;
      --offset-y: 0%;
      --rotate: 0deg;
      --scale-light: var(--scale);
      --offset-x-light: var(--offset-x);
      --offset-y-light: var(--offset-y);
      --rotate-light: var(--rotate);
      --scale-dark: var(--scale);
      --offset-x-dark: var(--offset-x);
      --offset-y-dark: var(--offset-y);
      --rotate-dark: var(--rotate);
      --scale-use: var(--scale);
      --offset-x-use: var(--offset-x);
      --offset-y-use: var(--offset-y);
      --rotate-use: var(--rotate);
      transform: scale(var(--scale-use)) translateX(var(--offset-x-use)) translateY(var(--offset-y-use)) rotate(var(--rotate-use));
    }

    body[data-skin="light"] .layer-overlay{
      --scale-use: var(--scale-light);
      --offset-x-use: var(--offset-x-light);
      --offset-y-use: var(--offset-y-light);
      --rotate-use: var(--rotate-light);
    }

    body[data-skin="dark"] .layer-overlay{
      --scale-use: var(--scale-dark);
      --offset-x-use: var(--offset-x-dark);
      --offset-y-use: var(--offset-y-dark);
      --rotate-use: var(--rotate-dark);
    }
  
    .pill-tag {
      display:inline-flex;
      align-items:center;
      gap:.25rem;
      font-size:.7rem;
      border-radius:999px;
      padding:.15rem .6rem;
      border:1px solid rgba(129,140,248,.85);
      background:rgba(15,23,42,.9);
      text-transform:uppercase;
      letter-spacing:.08em;
    }
  
    .pill-tag-soft {
      border-color:rgba(147,197,253,.55);
      background:rgba(15,23,42,.85);
    }
  
    .seg-btn {
      font-size:11px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,255,.45);
      background:rgba(15,23,42,.85);
      cursor:pointer;
      color:#e5e7eb;
      transition:all .12s ease;
    }
  
    .seg-btn.active {
      border-color:#a855f7;
      background:linear-gradient(135deg,#7c3aed,#a855f7);
      color:#fff;
      box-shadow:0 0 0 1px rgba(129,140,248,.7),0 0 16px rgba(168,85,247,.65);
    }
  
    .seg-btn:hover {
      background:rgba(30,64,175,.85);
    }
  
    .tab-btn {
      font-size:11px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,255,.35);
      background:rgba(15,23,42,.8);
      cursor:pointer;
      color:#e5e7eb;
      transition:all .12s ease;
      white-space:nowrap;
    }
  
    .tab-btn.active {
      border-color:#38bdf8;
      background:radial-gradient(circle at 0 0,#38bdf8,#6366f1);
      color:#0f172a;
    }
  
    .closet-item-card {
      border-radius:12px;
      border:1px solid rgba(148,163,255,.4);
      background:rgba(15,23,42,.96);
      padding:.45rem .55rem;
      text-align:left;
      cursor:pointer;
      transition:transform .08s ease, box-shadow .08s ease, border-color .08s ease, background .08s ease;
      display:flex;
      gap:.45rem;
      align-items:center;
    }
  
    .closet-item-card:hover {
      transform:translateY(-1px);
      border-color:#a855f7;
      box-shadow:0 0 0 1px rgba(129,140,248,.85),0 0 18px rgba(124,58,237,.55);
      background:rgba(30,64,175,.85);
    }
  
    .closet-item-card.active {
      border-color:#22c55e;
      box-shadow:0 0 0 1px rgba(22,163,74,.8),0 0 18px rgba(22,163,74,.7);
      background:rgba(5,46,22,.92);
    }
  
    .closet-item-thumb {
      width:44px;
      height:44px;
      border-radius:10px;
      border:1px solid rgba(148,163,255,.4);
      background:#020617;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex-shrink:0;
    }
  
    .closet-item-thumb img {
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
    }
  
    #closetError {
      border-radius:999px;
      border:1px solid rgba(248,113,113,.8);
      background:rgba(127,29,29,.90);
      padding:.4rem .75rem;
      font-size:11px;
    }
  
    #closetEmpty {
      border-radius:999px;
      border:1px dashed rgba(148,163,255,.5);
      background:rgba(15,23,42,.86);
      padding:.4rem .75rem;
      font-size:11px;
    }
  
    #bubbleStack,
    #bubble-top-single,
    #carrieWrap,
    #globalAvatarSwitch {
      display:none !important;
    }
  
    #carrieToggleBar,
    .carrie-toggle-bar,
    #carrieModeButtons {
      display:none !important;
    }
  
    @media (max-width:768px){
      .shell { border-radius:16px; }
      #closetPreviewFrame {
        max-width:100%;
        height: 650px;
        padding:10px 0;
        background-size: cover;
        background-position: center;
      }
      #closetPreviewInner {
        max-width:360px;
        height:100%;
      }
    }

    /* ========== FEMALE HAIR ‚Äì STRAIGHT ========== */
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_blonde{
      transform-origin:center top; --scale:0.50; --offset-x:0%; --offset-y:-12%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_blonde{
      transform-origin:center top; --scale:0.50; --offset-x:0%; --offset-y:-12%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_brown{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_brown{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_copper{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-22%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_copper{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-22%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_ginger{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_ginger{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_pastel_blue{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-21%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_pastel_blue{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-21%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_pastel_pink{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_pastel_pink{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_pastel_purple{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_pastel_purple{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;
    }

    /* ========== FEMALE HAIR ‚Äì WAVY ========== */
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_wavy_blonde{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-20%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_wavy_blonde{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-20%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_wavy_brown{
      transform-origin:center top; --scale:0.99; --offset-x:1%; --offset-y:-36%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_wavy_brown{
      transform-origin:center top; --scale:0.99; --offset-x:1%; --offset-y:-36%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_wavy_copper{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-20%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_wavy_copper{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-20%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_wavy_ginger{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-20%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_wavy_ginger{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-20%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_wavy_pastel_blue{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-20%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_wavy_pastel_blue{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-20%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_wavy_pastel_pink{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-21%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_wavy_pastel_pink{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-21%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_wavy_pastel_purple{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-20%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_wavy_pastel_purple{
      transform-origin:center top; --scale:0.60; --offset-x:-1%; --offset-y:-20%;
    }

   /* STRAIGHT BLACK HAIR */
body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_black{
  transform-origin:center top; --scale:0.46; --offset-x:0%; --offset-y:-15%;
}
body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_black{
  transform-origin:center top; --scale:0.38; --offset-x:0%; --offset-y:-15%;
}

    /* ========== TOPS ========== */
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-u_top_tank{
      transform-origin:center top; --scale:0.75; --offset-x:0%; --offset-y:-12%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_top_tank{
      transform-origin:center top; --scale:0.65; --offset-x:0%; --offset-y:-6%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-u_top_tee{
      transform-origin:center top; --scale:0.67; --offset-x:-1%; --offset-y:0%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_top_tee{
      transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:4.8%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_top_bikini_red{
      transform-origin:center top; --scale:0.37; --offset-x:-1%; --offset-y:38%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_top_bikini_red{
      transform-origin:center top; --scale:0.35; --offset-x:0%; --offset-y:41%;
    }

    body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_top_tank{
      transform-origin:center top; --scale:0.85; --offset-x:0%; --offset-y:-15%;
    }
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_top_tank{
      transform-origin:center top; --scale:0.85; --offset-x:0%; --offset-y:-15%;
    }

    body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_top_tee{
      transform-origin:center top; --scale:0.90; --offset-x:0%; --offset-y:-7%;
    }
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_top_tee{
      transform-origin:center top; --scale:0.90; --offset-x:0%; --offset-y:-4%;
    }

    /* ========== BOTTOMS ========== */
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_bottom_shorts{
      transform-origin:center top; --scale:.58; --offset-x:-1%; --offset-y:44%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_bottom_shorts{
      transform-origin:center top; --scale:.48; --offset-x:-0%; --offset-y:56%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_bottom_skirt{
      transform-origin:center top; --scale:.60; --offset-x:-0%; --offset-y:30%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_bottom_skirt{
      transform-origin:center top; --scale:.55; --offset-x:-0%; --offset-y:36%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_bottom_bikini_red{
      transform-origin:center top; --scale:.83; --offset-x:-1%; --offset-y:10%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_bottom_bikini_red{
      transform-origin:center top; --scale:.75; --offset-x:-0%; --offset-y:16%;
    }

    /* ========== JEWELRY ========== */
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_jewel_necklace{
      transform-origin:center top; --scale:.35; --offset-x:0%; --offset-y:07%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_jewel_necklace{
      transform-origin:center top; --scale:.35; --offset-x:0%; --offset-y:09%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_jewel_belly{
      transform-origin:center top; --scale:.15; --offset-x:0%; --offset-y:250%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_jewel_belly{
      transform-origin:center top; --scale:.15; --offset-x:0%; --offset-y:250%;
    }

    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_jewel_ears.layer-left{
      transform-origin:center top; --scale:0.20; --offset-x: -46%; --offset-y: 29%;
    }
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_jewel_ears.layer-right{
      transform-origin:center top; --scale:0.20; --offset-x: 46%; --offset-y: 29%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_jewel_ears.layer-left{
      transform-origin:center top; --scale:0.20; --offset-x:-46%; --offset-y:32%;
    }
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_jewel_ears.layer-right{
      transform-origin:center top; --scale:0.20; --offset-x:46%; --offset-y:32%;
    }

    body[data-gender="male"][data-skin="light"] .layer-overlay.item-m_jewel_necklace{
      transform-origin:center top; --scale:1; --offset-x:0%; --offset-y:0%;
    }
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-m_jewel_necklace{
      transform-origin:center top; --scale:1; --offset-x:0%; --offset-y:0%;
    }

    
    /* FEMALE LIGHT - LEFT SHOE */
body[data-gender="female"][data-skin="light"] .layer-overlay.layer-shoes-left {
  transform-origin: center center;
  --scale-light: 0.36;
  --offset-x-light: -18%;
  --offset-y-light: 120%;
  --rotate-light: 0deg;
}

/* FEMALE LIGHT - RIGHT SHOE */
body[data-gender="female"][data-skin="light"] .layer-overlay.layer-shoes-right {
  transform-origin: center center;
  --scale-light: 0.36;
  --offset-x-light: 13%;
  --offset-y-light: 120%;
  --rotate-light: 0deg;
}

/* FEMALE DARK - LEFT SHOE */
body[data-gender="female"][data-skin="dark"] .layer-overlay.layer-shoes-left {
  transform-origin: center center;
  --scale-dark: 0.34;
  --offset-x-dark: -20%;
  --offset-y-dark: 122%;
  --rotate-dark: 0deg;
}

/* FEMALE DARK - RIGHT SHOE */
body[data-gender="female"][data-skin="dark"] .layer-overlay.layer-shoes-right {
  transform-origin: center center;
  --scale-dark: 0.34;
  --offset-x-dark: 15%;
  --offset-y-dark: 122%;
  --rotate-dark: 0deg;
}

    /* MALE LIGHT - LEFT SHOE */
    body[data-gender="male"][data-skin="light"] .layer-overlay.layer-shoes-left {
      transform-origin: center center;
      --scale-light: 0.52;
      --offset-x-light: -25%;
      --offset-y-light: 86%;
      --rotate-light: 0deg;
    }

    /* MALE LIGHT - RIGHT SHOE */
    body[data-gender="male"][data-skin="light"] .layer-overlay.layer-shoes-right {
      transform-origin: center center;
      --scale-light: 0.52;
      --offset-x-light: 22%;
      --offset-y-light: 86%;
      --rotate-light: 0deg;
    }

    /* MALE DARK - LEFT SHOE */
    body[data-gender="male"][data-skin="dark"] .layer-overlay.layer-shoes-left {
      transform-origin: center center;
      --scale-dark: 0.52;
      --offset-x-dark: -25%;
      --offset-y-dark: 86%;
      --rotate-dark: 0deg;
    }

    /* MALE DARK - RIGHT SHOE */
    body[data-gender="male"][data-skin="dark"] .layer-overlay.layer-shoes-right {
      transform-origin: center center;
      --scale-dark: 0.52;
      --offset-x-dark: 25%;
      --offset-y-dark: 86%;
      --rotate-dark: 0deg;
    }
    /*EYES*/
    /* ========== EYES ========== */
    /* FEMALE LIGHT - LEFT EYE (ADJUSTED) */
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-u_eyes_blue.layer-left,
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-u_eyes_green.layer-left,
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-u_eyes_brown.layer-left {
      transform-origin: center top;
      --scale-light: 0.01;
      --offset-x-light: -375%;
      --offset-y-light: 1018%;
    }

    /* FEMALE LIGHT - RIGHT EYE (ADJUSTED) */
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-u_eyes_blue.layer-right,
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-u_eyes_green.layer-right,
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-u_eyes_brown.layer-right {
      transform-origin: center top;
      --scale-light: 0.01;
      --offset-x-light: 323%;
      --offset-y-light: 1020%;
    }

    /* FEMALE DARK - LEFT EYE (ADJUSTED) */
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_blue.layer-left,
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_green.layer-left,
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_brown.layer-left {
      transform-origin: center top;
      --scale-dark: 0.01;
      --offset-x-dark: -265%;
      --offset-y-dark: 1108%;
    }

    /* FEMALE DARK - RIGHT EYE (ADJUSTED) */
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_blue.layer-right,
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_green.layer-right,
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_brown.layer-right {
      transform-origin: center top;
      --scale-dark: 0.01;
      --offset-x-dark: 383%;
      --offset-y-dark: 1108%;
    }

    /* MALE LIGHT - LEFT EYE (ADJUSTED) */
    body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_blue.layer-left,
    body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_green.layer-left,
    body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_brown.layer-left {
      transform-origin: center top;
      --scale-light: 0.01;
      --offset-x-light: -405%;
      --offset-y-light: 968%;
    }

    /* MALE LIGHT - RIGHT EYE (ADJUSTED) */
    body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_blue.layer-right,
    body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_green.layer-right,
    body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_brown.layer-right {
      transform-origin: center top;
      --scale-light: 0.01;
      --offset-x-light: 393%;
      --offset-y-light: 970%;
    }

    /* MALE DARK - LEFT EYE (ADJUSTED) */
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_blue.layer-left,
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_green.layer-left,
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_brown.layer-left {
      transform-origin: center top;
      --scale-dark: 0.01;
      --offset-x-dark: -295%;
      --offset-y-dark: 978%;
    }

    /* MALE DARK - RIGHT EYE (ADJUSTED) */
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_blue.layer-right,
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_green.layer-right,
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_brown.layer-right {
      transform-origin: center top;
      --scale-dark: 0.01;
      --offset-x-dark: 523%;
      --offset-y-dark: 978%;
    }

    /* FEMALE DARK - LEFT EYE (ADJUSTED) */
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_blue.layer-left,
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_green.layer-left,
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_brown.layer-left {
      transform-origin: center top;
      --scale-dark: 0.01;
      --offset-x-dark: -265%;
      --offset-y-dark: 1108%;
    }

    /* FEMALE DARK - RIGHT EYE (ADJUSTED) */
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_blue.layer-right,
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_green.layer-right,
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_eyes_brown.layer-right {
      transform-origin: center top;
      --scale-dark: 0.01;
      --offset-x-dark: 383%;
      --offset-y-dark: 1108%;
    }

 /* MALE LIGHT - LEFT EYE (ADJUSTED) */
body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_blue.layer-left,
body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_green.layer-left,
body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_brown.layer-left {
  transform-origin: center top;
  --scale-light: 0.01;
  --offset-x-light: -405%;
  --offset-y-light: 968%;
}

/* MALE LIGHT - RIGHT EYE (ADJUSTED) */
body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_blue.layer-right,
body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_green.layer-right,
body[data-gender="male"][data-skin="light"] .layer-overlay.item-u_eyes_brown.layer-right {
  transform-origin: center top;
  --scale-light: 0.01;
  --offset-x-light: 393%;
  --offset-y-light: 970%;
}

    /* MALE DARK - LEFT EYE (ADJUSTED) */
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_blue.layer-left,
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_green.layer-left,
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_brown.layer-left {
      transform-origin: center top;
      --scale-dark: 0.01;
      --offset-x-dark: -295%;
      --offset-y-dark: 978%;
    }

    /* MALE DARK - RIGHT EYE (ADJUSTED) */
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_blue.layer-right,
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_green.layer-right,
    body[data-gender="male"][data-skin="dark"] .layer-overlay.item-u_eyes_brown.layer-right {
      transform-origin: center top;
      --scale-dark: 0.01;
      --offset-x-dark: 523%;
      --offset-y-dark: 978%;
    }

  /* Floating Avatar */
  #floatingAvatar { position:fixed; pointer-events:none; left:50%; top:50%; transform:translate(-50%,-50%); z-index:9999; cursor:grab; }
  #avatarContainer { position:relative; pointer-events:auto; width:480px; height:800px; transform-origin:center; }
  #baseImg { position:absolute; inset:0; height:100%; width:auto; object-fit:cover; z-index:1; left:50%; transform:translateX(-50%); filter:drop-shadow(0 0 3px #000); }
  body[data-skin] #baseImg { transform:translateX(-50%) scaleX(var(--base-width,1)) scaleY(var(--base-height,1)); }
  #overlayHost { position:absolute; inset:0; pointer-events:none; z-index:2; }
  #overlayHost img { filter:drop-shadow(0 0 2px #000); }

  /* Panels */
  .chat-panel { position:fixed; right:20px; top:80px; width:400px; max-height:calc(100vh - 100px); background:rgba(10,2,26,.95); border:1px solid rgba(124,58,237,.6); border-radius:16px; padding:1.5rem; box-shadow:0 20px 60px rgba(0,0,0,.8); overflow-y:auto; z-index:8888; }
  .items-panel { position:fixed; left:20px; top:80px; width:320px; max-height:calc(100vh - 100px); background:rgba(10,2,26,.95); border:1px solid rgba(124,58,237,.6); border-radius:16px; padding:1rem; box-shadow:0 20px 60px rgba(0,0,0,.8); overflow-y:auto; z-index:8888; }
  .section-box { background:rgba(15,23,42,.6); border:1px solid rgba(124,58,237,.3); border-radius:10px; padding:0.75rem; margin-bottom:1rem; }
  .section-title { font-size:0.85rem; font-weight:600; color:#a855f7; margin-bottom:0.75rem; display:flex; align-items:center; gap:0.5rem; }
  .items-grid-mini { display:grid; grid-template-columns:repeat(3,1fr); gap:0.5rem; }
  .mini-item { cursor:pointer; background:rgba(30,27,75,.6); border:2px solid rgba(124,58,237,.4); border-radius:8px; padding:0.4rem; transition:all .2s; position:relative; }
  .mini-item:hover { transform:translateY(-2px); border-color:#a855f7; box-shadow:0 4px 16px rgba(168,85,247,.4); }
  .mini-item.active { border-color:#10b981; background:rgba(16,185,129,.15); box-shadow:0 0 20px rgba(16,185,129,.3); }
  .mini-item.locked { opacity:0.6; }
  .mini-item-img { width:100%; aspect-ratio:1; background:rgba(0,0,0,.4); border-radius:4px; display:flex; align-items:center; justify-content:center; margin-bottom:0.3rem; position:relative; }
  .mini-item-img img { max-width:100%; max-height:100%; object-fit:contain; }
  .mini-item-name { font-size:0.55rem; text-align:center; color:#e5e7eb; font-weight:500; line-height:1.2; margin-bottom:0.2rem; }
  .item-price-mini { font-size:0.55rem; text-align:center; color:#fbbf24; font-weight:600; margin-bottom:0.2rem; }
  .btn-buy-mini { display:block; width:100%; background:linear-gradient(135deg,#10b981,#059669); border:1px solid #10b981; color:#fff; padding:0.15rem 0.25rem; border-radius:0.3rem; font-size:0.55rem; font-weight:600; cursor:pointer; text-align:center; }
  .btn-buy-mini:hover { filter:brightness(1.15); }
  .badge-mini { position:absolute; top:2px; right:2px; font-size:0.45rem; padding:1px 3px; border-radius:3px; font-weight:600; text-transform:uppercase; z-index:5; }
  .badge-owned { background:linear-gradient(135deg,#10b981,#059669); color:white; }
  .badge-active { background:linear-gradient(135deg,#fbbf24,#f59e0b); color:#000; font-weight:700; }
  .btn-icon { width:32px; height:32px; border-radius:50%; border:1px solid rgba(124,58,237,.6); background:rgba(15,23,42,.9); color:#fff; cursor:pointer; font-size:14px; display:flex; align-items:center; justify-content:center; transition:all 0.2s; }
  .btn-icon:hover { background:rgba(124,58,237,.8); transform:scale(1.1); }
  .chat-log { height:300px; overflow-y:auto; padding:0.75rem; background:rgba(5,10,30,.6); border-radius:10px; margin-bottom:1rem; }
  .msg { margin-bottom:0.75rem; display:flex; flex-direction:column; gap:0.25rem; }
  .msg .role { font-size:0.65rem; color:#a855f7; font-weight:600; text-transform:uppercase; }
  .msg .bubble { background:rgba(30,27,75,.8); border:1px solid rgba(124,58,237,.4); padding:0.5rem 0.7rem; border-radius:8px; font-size:0.85rem; line-height:1.4; }
  .msg.user .role { color:#10b981; }
  .msg.user .bubble { background:rgba(16,185,129,.15); border-color:#10b981; }
  #chatInput { width:100%; background:rgba(5,10,30,.6); border:1px solid rgba(124,58,237,.4); border-radius:8px; padding:0.5rem; color:#e5e7eb; font-size:0.85rem; margin-bottom:0.5rem; resize:vertical; min-height:60px; }
  #chatInput:focus { outline:none; border-color:#a855f7; box-shadow:0 0 0 2px rgba(168,85,247,.3); }
  .btn-primary { background:linear-gradient(135deg,#7c3aed,#a855f7); border:1px solid #a855f7; color:#fff; padding:0.5rem 1rem; border-radius:8px; font-size:0.85rem; font-weight:600; cursor:pointer; width:100%; }
  .btn-primary:hover { filter:brightness(1.1); }
  .coin-badge { background:linear-gradient(135deg,#fbbf24,#f59e0b); color:#000; font-weight:700; padding:0.4rem 0.7rem; border-radius:999px; font-size:0.85rem; display:inline-flex; align-items:center; gap:0.3rem; }
  .mode-btn { padding:0.35rem 0.7rem; font-size:0.75rem; border-radius:999px; border:1px solid rgba(124,58,237,.6); background:rgba(15,23,42,.85); color:#e5e7eb; cursor:pointer; }
  .mode-btn:hover { background:rgba(30,64,175,.85); }
  .mode-btn.active { border-color:#a855f7; background:linear-gradient(135deg,#7c3aed,#a855f7); color:#fff; box-shadow:0 0 0 1px rgba(129,140,248,.7),0 0 16px rgba(168,85,247,.65); }
  </style>
</head>
<body data-no-global-carrie="true" data-gender="female" data-skin="light">

  <div id="floatingAvatar">
    <div id="avatarContainer">
      <img id="baseImg" src="assets/images/base/female/base_female_light.png?v=15" alt="Carrie">
      <div id="overlayHost"></div>
    </div>
    <div style="position:absolute; top:10px; right:10px; display:flex; flex-direction:column; gap:5px; pointer-events:all;">
      <button id="zoomIn" class="btn-icon">‚ûï</button>
      <button id="zoomOut" class="btn-icon">‚ûñ</button>
      <button id="resetPos" class="btn-icon">üîÑ</button>
    </div>
  </div>

  <div style="position:fixed; top:20px; left:50%; transform:translateX(-50%); z-index:9999; display:flex; gap:1rem;">
    <div id="ownerBadge" style="display:none; background:linear-gradient(135deg,#fbbf24,#f59e0b); color:#000; padding:0.5rem 1rem; border-radius:999px; font-weight:700;">üëë Owner</div>
    <a href="coin-shop.html" style="background:linear-gradient(135deg,#fbbf24,#f59e0b); color:#000; padding:0.5rem 1rem; border-radius:999px; font-weight:700; text-decoration:none;">ü™ô Coin Shop</a>
  </div>

  <div class="items-panel">
    <div class="section-box">
      <span class="coin-badge">üí∞ <span id="coinDisplay">0</span></span>
      <div style="margin-top:0.75rem; margin-bottom:0.75rem;">
        <div style="font-size:0.7rem; color:#a855f7; font-weight:600; margin-bottom:0.4rem;">GENDER</div>
        <div style="display:flex; gap:0.5rem;">
          <button data-gender="female" class="seg-btn active">‚ôÄ</button>
          <button data-gender="male" class="seg-btn">‚ôÇ</button>
        </div>
      </div>
      <div>
        <div style="font-size:0.7rem; color:#a855f7; font-weight:600; margin-bottom:0.4rem;">SKIN</div>
        <div id="skinToneButtons" style="display:flex; gap:0.5rem;"></div>
      </div>
    </div>
    <div id="ownedSection" class="section-box" style="display:none;">
      <div class="section-title">‚ú® Collection <span id="ownedCount" style="font-size:0.7rem; color:#10b981; margin-left:auto;"></span></div>
      <div id="ownedItemsGrid" class="items-grid-mini"></div>
    </div>
    <div class="section-box">
      <div class="section-title">üõçÔ∏è Shop <span id="shopCount" style="font-size:0.7rem; color:#888; margin-left:auto;"></span></div>
      <div id="shopItemsGrid" class="items-grid-mini"></div>
    </div>
  </div>

  <div class="chat-panel">
    <h3 style="margin:0 0 1rem 0; color:#a855f7;">üí¨ Chat</h3>
    <div style="display:flex; gap:0.5rem; margin-bottom:1rem;">
      <button id="modePro" class="mode-btn active">Pro</button>
      <button id="modeFun" class="mode-btn">Fun</button>
      <span id="modeLabel" style="font-size:0.75rem; color:#888; margin-left:auto; align-self:center;">Professional</span>
    </div>
    <div id="chatStream" class="chat-log"></div>
    <textarea id="chatInput" placeholder="Type..." rows="3"></textarea>
    <div style="display:flex; gap:0.5rem;">
      <button id="sendBtn" class="btn-primary">Send</button>
      <button id="clearChat" class="btn-primary" style="width:auto; padding:0.5rem; background:rgba(124,58,237,.3);">üóë</button>
    </div>
  </div>

  <script src="carrie-chat-data.js"></script>
  <script src="carrie-chat.js"></script>
</body>
</html>
