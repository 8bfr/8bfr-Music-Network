<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Featured Users â€” 8BFR</title>
<link rel="icon" href="assets/images/favicon.png">
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{background:linear-gradient(#0b0014,#000);color:#eae6ff;font-family:system-ui;margin:0}
.section-card{border:1px solid rgba(124,58,237,.35);background:#0c0618;border-radius:14px;box-shadow:0 0 20px rgba(124,58,237,.18);padding:1.25rem;margin-bottom:1.5rem}
.btn{display:inline-block;background:#120327;border:1px solid rgba(124,58,237,.6);color:#eae6ff;padding:.4rem .7rem;border-radius:.6rem;text-decoration:none;transition:all .2s}
.btn:hover{background:#190536}
.user-card{background:rgba(15,0,30,0.6);border:1px solid rgba(124,58,237,0.3);border-radius:12px;padding:1rem;transition:all .2s}
.user-card:hover{background:rgba(124,58,237,0.15);border-color:rgba(124,58,237,0.5);transform:translateY(-2px)}
</style>
</head>
<body>
<header class="px-4 py-4 bg-[rgba(15,0,30,.9)] border-b border-purple-500/40">
  <div class="max-w-6xl mx-auto flex items-center justify-between">
    <a href="index.html" class="btn">â† Home</a>
    <h1 class="text-lg font-bold">âœ¨ Featured Users</h1>
    <span></span>
  </div>
</header>

<main class="max-w-6xl mx-auto px-4 py-6">
  
  <!-- MUSIC CREATORS -->
  <section id="artists" class="section-card">
    <h2 class="text-2xl font-bold mb-4">ğŸ¤ Artists</h2>
    <div id="artistsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
  </section>

  <section id="beatmakers" class="section-card">
    <h2 class="text-2xl font-bold mb-4">ğŸšï¸ Beatmakers</h2>
    <div id="beatmakersList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
  </section>

  <section id="producers" class="section-card">
    <h2 class="text-2xl font-bold mb-4">ğŸ§ Producers</h2>
    <div id="producersList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
  </section>

  <section id="singers" class="section-card">
    <h2 class="text-2xl font-bold mb-4">ğŸ™ï¸ Singers</h2>
    <div id="singersList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
  </section>

  <section id="djs" class="section-card">
    <h2 class="text-2xl font-bold mb-4">ğŸ“€ DJs</h2>
    <div id="djsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
  </section>

  <!-- CONTENT CREATORS -->
  <section id="authors" class="section-card">
    <h2 class="text-2xl font-bold mb-4">ğŸ“– Authors</h2>
    <div id="authorsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
  </section>

  <section id="bloggers" class="section-card">
    <h2 class="text-2xl font-bold mb-4">ğŸ“° Bloggers</h2>
    <div id="bloggersList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
  </section>

  <section id="developers" class="section-card">
    <h2 class="text-2xl font-bold mb-4">ğŸ§  Developers</h2>
    <div id="developersList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
  </section>

  <section id="streamers" class="section-card">
    <h2 class="text-2xl font-bold mb-4">ğŸ“¡ Streamers</h2>
    <div id="streamersList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
  </section>

  <!-- FEATURED USERS (Regular users) -->
  <section id="featured-users" class="section-card">
    <h2 class="text-2xl font-bold mb-4">ğŸ’ Featured Users</h2>
    <div id="featuredUsersList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
  </section>

</main>

<script src="scripts.js?v=6" defer></script>

<script>
(function() {
  // Badge configuration
  const badgeSections = {
    'artist': { emoji: 'ğŸ¤', label: 'Artist', container: 'artistsList' },
    'beatmaker': { emoji: 'ğŸšï¸', label: 'Beatmaker', container: 'beatmakersList' },
    'producer': { emoji: 'ğŸ§', label: 'Producer', container: 'producersList' },
    'singer': { emoji: 'ğŸ™ï¸', label: 'Singer', container: 'singersList' },
    'dj': { emoji: 'ğŸ“€', label: 'DJ', container: 'djsList' },
    'author': { emoji: 'ğŸ“–', label: 'Author', container: 'authorsList' },
    'blogger': { emoji: 'ğŸ“°', label: 'Blogger', container: 'bloggersList' },
    'developer': { emoji: 'ğŸ§ ', label: 'Developer', container: 'developersList' },
    'streamer': { emoji: 'ğŸ“¡', label: 'Streamer', container: 'streamersList' }
  };

  // Create user card HTML
  function createUserCard(user) {
    return `
      <div class="user-card">
        <div style="display:flex;align-items:center;gap:0.75rem;margin-bottom:0.75rem">
          <div style="width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#7c3aed,#a855f7);display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0">
            ${user.emoji}
          </div>
          <div style="flex:1;min-width:0">
            <div style="font-weight:700;font-size:1rem;margin-bottom:0.2rem;display:flex;align-items:center;gap:0.3rem">
              <span style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${user.name}</span>
              ${user.verified ? '<span style="color:#00d9ff;font-size:0.85rem">ğŸ›¡ï¸</span>' : ''}
            </div>
            <div style="font-size:0.8rem;color:#a855f7">
              ${user.badgeLabel}
            </div>
          </div>
        </div>
        <a href="profile.html?id=${user.id}" class="btn" style="width:100%;text-align:center">
          View Profile
        </a>
      </div>
    `;
  }

  // Load users for each badge type
  function loadFeaturedUsers() {
    const usersByBadge = {};
    const regularUsers = [];

    // Initialize badge sections
    Object.keys(badgeSections).forEach(badge => {
      usersByBadge[badge] = [];
    });

    // Collect users
    for (let i = 0; i < localStorage.length; i++) {
      const key = localStorage.key(i);
      if (!key.startsWith('profile_') || key.includes('settings')) continue;

      try {
        const profile = JSON.parse(localStorage.getItem(key) || '{}');
        if (!profile.name) continue;

        const badges = profile.badges || [];
        const primaryBadge = badges[0]; // First badge is primary
        const isVerified = profile.verified === true;

        const user = {
          name: profile.name,
          id: key.replace('profile_', ''),
          emoji: getBadgeEmoji(badges),
          verified: isVerified,
          badgeLabel: '',
          primaryBadge
        };

        // Check if user has a professional badge
        let assigned = false;
        for (const badge of badges) {
          if (badgeSections[badge]) {
            user.badgeLabel = badgeSections[badge].label;
            usersByBadge[badge].push(user);
            assigned = true;
            break; // Only assign to first matching section
          }
        }

        // If no professional badge, add to featured users
        if (!assigned) {
          user.badgeLabel = getPrimaryBadgeLabel(badges);
          regularUsers.push(user);
        }
      } catch(e) {}
    }

    // Populate sections
    Object.keys(badgeSections).forEach(badge => {
      const container = document.getElementById(badgeSections[badge].container);
      const users = usersByBadge[badge];

      if (!container) return;

      if (users.length === 0) {
        container.innerHTML = `
          <div style="text-align:center;padding:2rem 1rem;color:#a855f7;opacity:0.6;grid-column:1/-1">
            <div style="font-size:0.9rem">No ${badgeSections[badge].label.toLowerCase()}s yet</div>
          </div>
        `;
      } else {
        container.innerHTML = users.map(createUserCard).join('');
      }
    });

    // Populate featured users section
    const featuredContainer = document.getElementById('featuredUsersList');
    if (featuredContainer) {
      if (regularUsers.length === 0) {
        featuredContainer.innerHTML = `
          <div style="text-align:center;padding:2rem 1rem;color:#a855f7;opacity:0.6;grid-column:1/-1">
            <div style="font-size:0.9rem">No featured users yet</div>
          </div>
        `;
      } else {
        featuredContainer.innerHTML = regularUsers.map(createUserCard).join('');
      }
    }
  }

  // Get badge emoji
  function getBadgeEmoji(badges) {
    if (!badges || !badges.length) return 'ğŸ‘¤';
    
    const emojiMap = {
      'artist': 'ğŸ¤',
      'beatmaker': 'ğŸšï¸',
      'producer': 'ğŸ§',
      'singer': 'ğŸ™ï¸',
      'musician': 'ğŸ¸',
      'dj': 'ğŸ“€',
      'author': 'ğŸ“–',
      'blogger': 'ğŸ“°',
      'developer': 'ğŸ§ ',
      'streamer': 'ğŸ“¡',
      'gamer': 'ğŸ®',
      'influencer': 'ğŸ’«',
      'fan': 'ğŸ’'
    };

    return emojiMap[badges[0]] || 'ğŸ‘¤';
  }

  // Get primary badge label
  function getPrimaryBadgeLabel(badges) {
    if (!badges || !badges.length) return 'User';
    
    const labelMap = {
      'influencer': 'Influencer',
      'fan': 'Fan',
      'supporter': 'Supporter',
      'community_leader': 'Community Leader',
      'gamer': 'Gamer',
      'verified': 'Verified User'
    };

    return labelMap[badges[0]] || 'User';
  }

  // Initialize on load
  window.addEventListener('load', loadFeaturedUsers);
})();
</script>

</body>
</html>
