<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Carrie Closet — 8BFR Music Network</title>
  <meta name="description" content="Change outfits, hair, eyes, jewelry and more using coins in the Carrie Closet." />
  <link rel="icon" href="assets/images/favicon.png" />
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --ring: rgba(124,58,237,.55);
      --glass: rgba(12,6,24,.85);
    }
    html,body { scroll-behavior:smooth; }
    body{
      font-family: system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(124,58,237,.35), transparent 60%),
        radial-gradient(900px 400px at 110% 10%, rgba(0,217,255,.22), transparent 60%),
        linear-gradient(#0b0014,#000);
      color:#eae6ff;
      margin:0;
      min-height:100vh;
      overflow-x:hidden;
    }
    header{
      position:relative;
      z-index:5;
      background:rgba(15,0,30,.9);
      border-bottom:1px solid rgba(124,58,237,.5);
    }

    .closet-shell{
      border-radius:18px;
      border:1px solid rgba(124,58,237,.6);
      background:rgba(10,2,26,.95);
      box-shadow:0 16px 40px rgba(0,0,0,.9);
      padding:1rem;
    }

    /* Preview avatar */
    #closetPreviewBox{
      border-radius:14px;
      border:1px solid rgba(129,140,248,.7);
      background:radial-gradient(circle at 20% 0, rgba(129,140,248,.25), transparent 55%),
                 radial-gradient(circle at 80% 100%, rgba(45,212,191,.18), transparent 60%),
                 #020014;
      padding:.75rem;
    }
    #closetPreview{
      position:relative;
      width:260px;
      max-width:80vw;
      aspect-ratio:3/5;
      margin:0 auto;
    }
    .closet-layer{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:contain;
      image-rendering:auto;
    }

    .gender-pill{
      border-radius:999px;
      border:1px solid rgba(129,140,248,.6);
      padding:3px 10px;
      font-size:11px;
      cursor:pointer;
      background:rgba(15,23,42,.9);
      color:#e5e7eb;
    }
    .gender-pill-active{
      background:linear-gradient(135deg,#7c3aed,#4c1d95);
      border-color:#a855f7;
      box-shadow:0 0 12px rgba(168,85,247,.6);
    }

    .closet-slot-btn{
      font-size:11px;
      border-radius:999px;
      padding:4px 10px;
      border:1px solid rgba(129,140,248,.6);
      background:rgba(15,23,42,.9);
      color:#e5e7eb;
      cursor:pointer;
      margin-right:.25rem;
      margin-bottom:.25rem;
      white-space:nowrap;
    }
    .closet-slot-btn-active{
      background:linear-gradient(135deg,#7c3aed,#4c1d95);
      border-color:#a855f7;
      box-shadow:0 0 10px rgba(168,85,247,.6);
    }

    .closet-item-row{
      width:100%;
      text-align:left;
      border-radius:10px;
      padding:6px 8px;
      border:1px solid transparent;
      background:rgba(15,23,42,.85);
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:.5rem;
      margin-bottom:4px;
      cursor:pointer;
    }
    .closet-item-row:hover{
      border-color:rgba(129,140,248,.9);
      background:rgba(30,64,175,.85);
    }
    .closet-item-row-active{
      border-color:#a855f7;
      background:linear-gradient(135deg,#7c3aed,#4c1d95);
      box-shadow:0 0 12px rgba(168,85,247,.75);
    }

    .coin-pill{
      border-radius:999px;
      padding:3px 9px;
      border:1px solid rgba(251,191,36,.6);
      background:rgba(24,16,6,.95);
      font-size:11px;
      display:inline-flex;
      align-items:center;
      gap:4px;
      color:#fef3c7;
    }
    .coin-pill img{
      width:14px;
      height:14px;
    }

    #closetStatus{
      font-size:12px;
      text-align:center;
      padding:.35rem .5rem;
      border-radius:999px;
      border:1px solid rgba(129,140,248,.5);
      background:rgba(15,23,42,.9);
      color:#e0e7ff;
      margin-bottom:.5rem;
    }

    @media (max-width:768px){
      .closet-shell{
        padding:.75rem;
      }
    }
  </style>
</head>
<body>
<header class="px-4 py-4">
  <div class="max-w-6xl mx-auto flex items-center justify-between gap-3">
    <div class="flex items-center gap-3">
      <img src="assets/images/logo_8bfr.svg"
           alt="8BFR logo"
           class="h-9 w-auto"
           onerror="this.onerror=null;this.src='assets/images/8bfr.png'">
      <div>
        <h1 class="text-xl sm:text-2xl font-extrabold">
          <span class="text-[#a855f7]">Carrie Closet</span>
          <span class="text-xs align-middle ml-2 px-2 py-0.5 rounded-full border border-purple-400/70 text-purple-100 bg-purple-900/40">BETA</span>
        </h1>
        <p class="text-[11px] text-purple-300/80 -mt-0.5">
          Mix outfits, hair, eyes, accessories — then use coins to unlock more looks.
        </p>
      </div>
    </div>
    <a href="carrie-chat.html"
       class="hidden sm:inline text-[#00d9ff] text-xs sm:text-sm underline/50 hover:underline">
      ⬅ Back to Carrie Chat
    </a>
  </div>
</header>

<main class="max-w-5xl mx-auto px-4 pb-10 pt-4">
  <div id="closetStatus">Loading Carrie Closet…</div>

  <div id="closetApp" class="closet-shell hidden">
    <div class="flex flex-col lg:flex-row gap-4">
      <!-- LEFT: Preview + gender + coins -->
      <section class="w-full lg:w-1/3">
        <div class="flex items-center justify-between mb-2">
          <div class="flex gap-1.5">
            <button type="button"
                    class="gender-pill gender-pill-active"
                    data-gender-toggle="female">
              ♀ Female
            </button>
            <button type="button"
                    class="gender-pill"
                    data-gender-toggle="male">
              ♂ Male
            </button>
          </div>
          <div class="coin-pill">
            <img src="assets/images/icon_coin.png" alt="coins">
            <span id="closetCoins">0</span>
          </div>
        </div>

        <div id="closetPreviewBox">
          <div id="closetPreview">
            <div id="closetPreviewLayers"></div>
          </div>
          <p class="mt-2 text-[10px] text-purple-200/80 text-center">
            Avatar preview updates as you change slots and items.
            All layers use your PNG art stacked on top of each other.
          </p>
        </div>
      </section>

      <!-- RIGHT: Slots + items -->
      <section class="w-full lg:w-2/3">
        <div class="mb-3">
          <p class="text-[11px] text-purple-200/85 mb-1.5">
            Choose what you want to change:
          </p>
          <div id="closetSlotButtons" class="flex flex-wrap"></div>
        </div>

        <div>
          <p class="text-[11px] text-purple-200/90 mb-1">
            Items in this category:
          </p>
          <div id="closetItemList" class="max-h-[380px] overflow-y-auto pr-1"></div>
          <p class="mt-2 text-[10px] text-purple-300/75">
            Prices are per unlock. Once an item is purchased, you can switch back to it freely while your session is open.
            In the future, these coins will sync to your 8BFR account.
          </p>
        </div>
      </section>
    </div>
  </div>

  <p class="mt-3 text-[11px] text-purple-300/70 text-center max-w-xl mx-auto">
    Closet is in beta. Only Carrie’s photo avatar uses these outfits for now. Business / Personal chat still use video avatars.
    Boyfriend / Girlfriend chat will use this system once the Pro upgrade is ready.
  </p>
</main>

<!-- Global 8BFR UI (menu, etc.) -->
<script src="scripts.js?v=1" defer></script>

<!-- Closet data + logic (bumped versions to clear cache) -->
<script src="carrie-closet--data.js?v=4"></script>
<script src="carrie-closet.js?v=4"></script>
</body>
</html>
