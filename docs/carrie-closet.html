<!DOCTYPE html>
<html lang="en">    
<head>    
  <meta charset="utf-8" />    
  <meta name="viewport" content="width=device-width,initial-scale=1" />    
  <title>Carrie Closet â€” 8BFR Music Network</title>    
  <meta name="description" content="Customize your Carrie, James, or partner avatar with outfits, hair, accessories and more using 8BFR coins." />    
  <link rel="icon" href="assets/images/favicon.png?v=15" />    
  <script src="https://cdn.tailwindcss.com"></script>    
  
  <style>    
    :root {    
      --ring: rgba(124,58,237,.55);    
      --glass: rgba(12,6,24,.80);    
    }    
  
    html, body { scroll-behavior:smooth; }    
  
    body {    
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;    
      background:    
        radial-gradient(1200px 600px at 10% -10%, rgba(124,58,237,.30), transparent 60%),    
        radial-gradient(900px 400px at 110% 10%, rgba(0,217,255,.22), transparent 60%),    
        linear-gradient(#050011,#000);    
      color:#eae6ff;    
      margin:0;    
      min-height:100vh;    
      overflow-x:hidden;    
    }    
  
    header {    
      position:relative;    
      z-index:5;    
      background:rgba(10,0,25,.96);    
      border-bottom:1px solid rgba(124,58,237,.5);    
      box-shadow:0 18px 40px rgba(0,0,0,.7);    
    }    
  
    .shell {    
      border-radius:20px;    
      border:1px solid rgba(129,140,248,.6);    
      background:    
        radial-gradient(circle at 0 0,rgba(76,29,149,.40),transparent 60%),    
        radial-gradient(circle at 100% 0,rgba(14,165,233,.22),transparent 60%),    
        rgba(10,6,30,.96);    
      box-shadow:0 18px 50px rgba(0,0,0,.8);    
    }    
  
    /* --- Preview frame + dressing room background --- */    
    #closetPreviewFrame {    
      width: 100%;    
      max-width: 1100px;    
      margin: 0 auto;    
      border-radius: 18px;    
      border: 1px solid rgba(148,163,255,0.55);    
      overflow: hidden;    
  
      height: 800px;                 
      display: flex;    
      align-items: center;    
      justify-content: center;    
  
      background-image: url("assets/images/closet/dressingroom.png?v=15");    
      background-size: cover;    
      background-position: center;    
      background-repeat: no-repeat;    
  
      position: relative;    
    }    
  
    /* Inner canvas where base + layers sit */    
    #closetPreviewInner {    
      position: relative;    
      width: 100%;    
      max-width: 480px;    
      height: 100%;    
      transform: translateY(30px);  
    }    
  
    /* Base avatar */    
    #closetBaseImg {    
      position: absolute;    
      inset: 0;    
      height: 100%;    
      width: auto;    
      object-fit: cover;    
      display: block;    
      z-index: 1;    
      left: 50%;    
      transform: translateX(-50%);    
      filter: drop-shadow(0 0 3px #000);    
    }   

    /* ============================================================
       âœ… BASE AVATAR WIDTH/HEIGHT CONTROLS (LIGHT + DARK)
       ============================================================ */
    body[data-gender="female"][data-skin="light"]{ --base-width: .89; --base-height: .99; }
    body[data-gender="female"][data-skin="dark"]{ --base-width: .63; --base-height: .96; }
    body[data-gender="male"][data-skin="light"]{ --base-width: 1.00; --base-height: 1.00; }
    body[data-gender="male"][data-skin="dark"]{ --base-width: 0.96; --base-height: 1.00; }

    body[data-skin] #closetBaseImg{
      transform: translateX(-50%) scaleX(var(--base-width, 1)) scaleY(var(--base-height, 1));
    }

    #closetOverlayHost img { filter: drop-shadow(0 0 2px #000); }    
    #closetOverlayHost { position:absolute; inset:0; pointer-events:none; z-index:2; }

    .layer-overlay {    
      position:absolute;    
      inset:0;    
      width:100%;    
      height:100%;    
      object-fit:contain;    
      pointer-events:none;    
      image-rendering:auto; 

      --scale-left-light: var(--scale-light);
      --offset-x-left-light: var(--offset-x-light);
      --offset-y-left-light: var(--offset-y-light);

      --scale-left-dark: var(--scale-dark);
      --offset-x-left-dark: var(--offset-x-dark);
      --offset-y-left-dark: var(--offset-y-dark);

      --scale-right-light: var(--scale-light);
      --offset-x-right-light: var(--offset-x-light);
      --offset-y-right-light: var(--offset-y-light);

      --scale-right-dark: var(--scale-dark);
      --offset-x-right-dark: var(--offset-x-dark);
      --offset-y-right-dark: var(--offset-y-dark);

      --scale: 1; --offset-x: 0%; --offset-y: 0%;
      --scale-light: var(--scale); --offset-x-light: var(--offset-x); --offset-y-light: var(--offset-y);
      --scale-dark: var(--scale); --offset-x-dark: var(--offset-x); --offset-y-dark: var(--offset-y);
      --scale-use: var(--scale); --offset-x-use: var(--offset-x); --offset-y-use: var(--offset-y);
      transform: scale(var(--scale-use)) translateX(var(--offset-x-use)) translateY(var(--offset-y-use));
    }

    body[data-skin="light"] .layer-overlay{ --scale-use: var(--scale-light); --offset-x-use: var(--offset-x-light); --offset-y-use: var(--offset-y-light); }
    body[data-skin="dark"] .layer-overlay{ --scale-use: var(--scale-dark); --offset-x-use: var(--offset-x-dark); --offset-y-use: var(--offset-y-dark); }
    body[data-skin="light"] .layer-left { --scale-use: var(--scale-left-light); --offset-x-use: var(--offset-x-left-light); --offset-y-use: var(--offset-y-left-light); }
    body[data-skin="light"] .layer-right { --scale-use: var(--scale-right-light); --offset-x-use: var(--offset-x-right-light); --offset-y-use: var(--offset-y-right-light); }
    body[data-skin="dark"] .layer-left { --scale-use: var(--scale-left-dark); --offset-x-use: var(--offset-x-left-dark); --offset-y-use: var(--offset-y-left-dark); }
    body[data-skin="dark"] .layer-right { --scale-use: var(--scale-right-dark); --offset-x-use: var(--offset-x-right-dark); --offset-y-use: var(--offset-y-right-dark); }

    /* ...all your previous CSS remains unchanged up to here... */

    /* ===============================
       FIX FEMALE SHOES / EYES / EARRINGS
       =============================== */
    /* SHOES */
    body[data-gender="female"][data-skin="light"] .layer-shoes-left { --scale-use: -3; --offset-x-use: -4%; --offset-y-use: 2%; }
    body[data-gender="female"][data-skin="light"] .layer-shoes-right { --scale-use: 1; --offset-x-use: 4%; --offset-y-use: 2%; }
    body[data-gender="female"][data-skin="dark"] .layer-shoes-left { --scale-use: 1; --offset-x-use: -2%; --offset-y-use: 3%; }
    body[data-gender="female"][data-skin="dark"] .layer-shoes-right { --scale-use: 1; --offset-x-use: 2%; --offset-y-use: 3%; }

    /* EYES */
    body[data-gender="female"][data-skin="light"] .layer-eyes-left { --scale-use: 0.95; --offset-x-use: 2%; --offset-y-use: -2%; }
    body[data-gender="female"][data-skin="light"] .layer-eyes-right { --scale-use: 0.95; --offset-x-use: 1%; --offset-y-use: -2%; }
    body[data-gender="female"][data-skin="dark"] .layer-eyes-left { --scale-use: 0.95; --offset-x-use: -1%; --offset-y-use: -1%; }
    body[data-gender="female"][data-skin="dark"] .layer-eyes-right { --scale-use: 0.95; --offset-x-use: 1%; --offset-y-use: -1%; }

    /* EARRINGS */
    body[data-gender="female"][data-skin="light"] .layer-ears-left { --scale-use: 1; --offset-x-use: -3%; --offset-y-use: -5%; }
    body[data-gender="female"][data-skin="light"] .layer-ears-right { --scale-use: 1; --offset-x-use: -3%; --offset-y-use: -5%; }
    body[data-gender="female"][data-skin="dark"] .layer-ears-left { --scale-use: 1; --offset-x-use: 2%; --offset-y-use: -4%; }
    body[data-gender="female"][data-skin="dark"] .layer-ears-right { --scale-use: 1; --offset-x-use: -2%; --offset-y-use: -4%; }
  </style>    
</head>    
  
<body data-no-global-carrie="true" data-gender="female">    
  <!-- TEST INSERT: if you see this in red, the file is updating -->  
  <h1 style="color:red; font-size:30px; text-align:center; margin-top:10px;">  
   <!-- TEST CLOSET 999--!> 
  </h1>  
  
  <header class="px-4 py-4">    
    <div class="max-w-6xl mx-auto flex items-center justify-between gap-3">    
      <div class="flex items-center gap-3">    
        <img src="assets/images/logo_8bfr.svg?v=15" alt="8BFR logo" class="h-9 w-auto" onerror="this.onerror=null;this.src='assets/images/8bfr.png?v=15'">    
        <div>    
          <h1 class="text-xl sm:text-2xl font-extrabold">    
            <span class="text-[#a855f7]">Carrie Closet</span>    
            <span class="text-xs sm:text-sm font-semibold align-middle ml-1 text-emerald-300/80">beta</span>    
          </h1>    
          <p class="text-[11px] text-purple-300/80 -mt-0.5">Dress your AI avatar for BF / GF chat and future upgrades.</p>    
        </div>    
      </div>    
      <div class="flex flex-col items-end gap-1">    
        <a href="carrie-chat.html" class="text-[#00d9ff] text-[11px] sm:text-xs underline/50 hover:underline">â¬… Back to Carrie Chat</a>    
        <span class="pill-tag pill-tag-soft text-[10px]">ðŸª™ Coins shop connects from here later</span>    
      </div>    
    </div>    
  </header>    
  
  <main class="max-w-6xl mx-auto px-4 pb-10 pt-5">    
    <div class="shell p-4 sm:p-5 lg:p-6">    
      <div class="flex flex-col lg:flex-row gap-6 lg:gap-8">    
        <!-- LEFT: Preview + base controls -->    
        <section class="lg:w-[60%] space-y-4">    
          <div class="flex items-center justify-between gap-2">    
            <div class="flex flex-wrap items-center gap-2">    
              <span class="pill-tag text-[10px]">ðŸ§¬ Avatar Preview</span>    
              <span id="closetPreviewLabel" class="text-[11px] text-purple-200/80">Female â€¢ Light skin â€¢ Bikini base</span>    
            </div>    
            <span class="text-[10px] text-purple-200/80">BF / GF chat only</span>    
          </div>    

          <div id="closetPreviewFrame">    
            <div id="closetPreviewInner">    
              <img id="closetBaseImg" src="assets/images/base/female/base_female_light.png?v=15" alt="Avatar base">    
              <div id="closetOverlayHost"></div>    
            </div>    
          </div>    

          <div class="space-y-3 mt-2">    
            <!-- Gender -->    
            <div>    
              <div class="flex items-center gap-2 mb-1">    
                <span class="uppercase tracking-[0.16em] text-[9px] text-purple-200/75">Gender</span>    
              </div>    
              <div class="flex gap-2">    
                <button type="button" class="seg-btn active" data-gender="female">â™€ Female</button>    
                <button type="button" class="seg-btn" data-gender="male">â™‚ Male</button>    
              </div>    
            </div>    

            <!-- Skin tone -->    
            <div>    
              <div class="flex items-center gap-2 mb-1">    
                <span class="uppercase tracking-[0.16em] text-[9px] text-purple-200/75">Skin tone</span>    
              </div>    
              <div id="skinToneButtons" class="flex flex-wrap gap-2">    
                <!-- Filled by JS -->    
              </div>    
            </div>    
          </div>    

          <p class="mt-3 text-[11px] text-purple-200/80">Tip: All outfits, hair, and accessories are drawn on the same canvas as the base, so what you see here will match BF / GF chat exactly.</p>    
        </section>    

        <!-- RIGHT: Filters + items -->    
        <section class="lg:flex-1 space-y-3">    
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">    
            <div class="flex flex-wrap items-center gap-2">    
              <span class="pill-tag text-[10px]">ðŸ›’ Closet Items</span>    
              <span id="closetGenderLabel" class="text-[11px] text-purple-200/85">Showing items for <b>Female</b> avatar</span>    
            </div>    
          </div>    

          <!-- Category tabs -->    
          <div class="flex flex-wrap gap-2 mt-1">    
            <button type="button" class="tab-btn active" data-cat="hair">Hair</button>    
            <button type="button" class="tab-btn" data-cat="top">Tops</button>    
            <button type="button" class="tab-btn" data-cat="bottom">Bottoms</button>    
            <button type="button" class="tab-btn" data-cat="jewelry">Jewelry</button>    
            <button type="button" class="tab-btn" data-cat="eyes">Eyes</button>    
            <button type="button" class="tab-btn" data-cat="shoes">Shoes</button>    
            <button type="button" class="tab-btn" data-cat="all">All</button>    
          </div>    

          <!-- Error / empty messages -->    
          <div id="closetError" class="hidden mt-2 text-red-50 text-[11px]">Closet data failed to load. Please check carrie-closet-data.js.</div>    
          <div id="closetEmpty" class="hidden mt-2 text-purple-100/90 text-[11px]">No items for this category yet. Try switching categories or gender.</div>    

          <!-- Items grid -->    
          <div id="closetItemsGrid" class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2.5">    
            <!-- JS will inject cards -->    
          </div>    

          <p class="mt-3 text-[10px] text-purple-300/75">In the full release, each item will cost 8BFR coins and connect to your <a href="coinshop.html" class="underline text-sky-300 hover:text-sky-200">Coin Shop</a>. For now this is a visual beta so you can design outfits without charging coins.</p>    
        </section>    
      </div>    
    </div>    

    <p class="mt-4 text-[11px] text-purple-300/70 text-center max-w-3xl mx-auto">Default male base has shorts and no shirt. Default female base uses a bikini. Tops, bottoms, hair, eyes, jewelry, and shoes layer over those bases.</p>    
  </main>    

  <!-- Closet data + logic (DATA FIRST, then LOGIC) -->    
  <script src="carrie-closet-data.js?v=128"></script>    
  <script src="carrie-closet.js?v=128"></script>    
</body>    
</html>
