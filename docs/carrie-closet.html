<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Carrie Closet ‚Äî 8BFR Music Network</title>
  <meta name="description" content="Customize your Carrie / James / Azreen avatar with outfits, hair, and accessories using 8BFR coins." />
  <link rel="icon" href="assets/images/favicon.png" />
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --ring: rgba(124,58,237,.55);
      --glass: rgba(12,6,24,.80);
    }
    html,body { scroll-behavior:smooth; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(124,58,237,.35), transparent 60%),
        radial-gradient(900px 400px at 110% 10%, rgba(0,217,255,.22), transparent 60%),
        linear-gradient(#0b0014,#000);
      color:#eae6ff;
      margin:0;
      min-height:100vh;
      overflow-x:hidden;
    }
    header{
      position:relative;
      z-index:5;
      background:rgba(15,0,30,.9);
      border-bottom:1px solid rgba(124,58,237,.5);
    }

    /* Panel shells */
    .closet-shell{
      border-radius:18px;
      border:1px solid rgba(124,58,237,.55);
      background:rgba(10,2,26,.95);
      box-shadow:0 16px 40px rgba(0,0,0,.75);
      overflow:hidden;
    }

    /* Preview circle */
    .avatar-stage{
      position:relative;
      width:100%;
      max-width:320px;
      aspect-ratio:3/4;
      border-radius:24px;
      margin-inline:auto;
      background:
        radial-gradient(circle at 50% 10%, rgba(236,72,153,.6), transparent 60%),
        radial-gradient(circle at 0% 100%, rgba(59,130,246,.6), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(139,92,246,.7), transparent 55%),
        #020014;
      border:1px solid rgba(129,140,248,.8);
      box-shadow:
        0 18px 40px rgba(0,0,0,.9),
        0 0 30px rgba(124,58,237,.65);
      overflow:hidden;
    }
    .avatar-layer{
      position:absolute;
      inset:0;
      object-fit:contain;
      width:100%;
      height:100%;
      pointer-events:none;
      user-select:none;
    }

    /* Items grid */
    .item-card{
      border-radius:14px;
      border:1px solid rgba(148,163,255,.45);
      background:rgba(15,23,42,.9);
      padding:.6rem;
      display:flex;
      flex-direction:column;
      gap:.35rem;
      font-size:.8rem;
    }
    .item-thumb{
      border-radius:10px;
      background:#020617;
      border:1px solid rgba(129,140,248,.5);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      aspect-ratio:1/1;
    }
    .item-thumb img{
      width:100%;
      height:100%;
      object-fit:contain;
    }
    .item-meta{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:.4rem;
    }
    .coin-tag{
      display:inline-flex;
      align-items:center;
      gap:.15rem;
      font-size:.7rem;
      padding:.15rem .45rem;
      border-radius:999px;
      border:1px solid rgba(234,179,8,.85);
      background:rgba(24,16,0,.9);
      color:#facc15;
    }
    .status-tag{
      display:inline-flex;
      align-items:center;
      gap:.2rem;
      font-size:.7rem;
      padding:.15rem .4rem;
      border-radius:999px;
      border:1px solid rgba(52,211,153,.85);
      background:rgba(6,78,59,.9);
      color:#bbf7d0;
    }
    .status-locked{
      border-color:rgba(239,68,68,.75);
      background:rgba(127,29,29,.9);
      color:#fecaca;
    }
    .btn-mini{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:.25rem;
      padding:.25rem .55rem;
      border-radius:.6rem;
      border:1px solid rgba(129,140,248,.7);
      background:rgba(30,64,175,.9);
      color:#e5e7eb;
      font-size:.75rem;
      cursor:pointer;
    }
    .btn-mini[disabled]{
      opacity:.6;
      cursor:default;
      background:rgba(30,64,175,.4);
    }

    /* Filters row */
    .filter-pill{
      border-radius:999px;
      border:1px solid rgba(129,140,248,.6);
      background:rgba(15,23,42,.9);
      padding:2px 8px;
      font-size:.7rem;
      display:inline-flex;
      align-items:center;
      gap:.25rem;
    }

    /* Hide global Carrie (only hamburger) */
    #bubbleStack,
    #bubble-top-single,
    #carrieWrap,
    #globalAvatarSwitch {
      display:none !important;
    }
  </style>
</head>

<!-- Only hamburger from scripts.js; no global Carrie avatar -->
<body data-no-global-carrie="true">
  <header class="px-4 py-4">
    <div class="max-w-6xl mx-auto flex items-center justify-between gap-3">
      <div class="flex items-center gap-3">
        <img src="assets/images/logo_8bfr.svg"
             alt="8BFR logo"
             class="h-9 w-auto"
             onerror="this.onerror=null;this.src='assets/images/8bfr.png'">
        <div>
          <h1 class="text-xl sm:text-2xl font-extrabold">
            Carrie Closet <span class="text-[#a855f7]">Beta</span>
          </h1>
          <p class="text-[11px] text-purple-300/80 -mt-0.5">
            Avatar outfits ‚Ä¢ hair ‚Ä¢ jewelry ‚Ä¢ eyes ‚Ä¢ shoes
          </p>
        </div>
      </div>
      <a href="carrie-chat.html"
         class="text-[#00d9ff] text-xs sm:text-sm underline/50 hover:underline">
        ‚¨Ö Back to Carrie Chat
      </a>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 pb-10 pt-4">
    <!-- Loading / error states -->
    <div id="closetLoading" class="text-sm text-purple-100/80 mb-3">
      Loading Carrie Closet‚Ä¶
    </div>
    <div id="closetError" class="hidden text-sm text-rose-300 mb-3">
      Something went wrong loading the closet data. Please refresh or try again later.
    </div>

    <!-- Main shell (hidden until JS is ready) -->
    <div id="closetMain" class="closet-shell hidden p-4 sm:p-6">
      <div class="grid gap-6 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,1.3fr)]">
        <!-- LEFT: Preview + meta -->
        <section>
          <div class="flex items-center justify-between mb-3 gap-3">
            <div>
              <h2 class="text-sm font-semibold text-purple-100 flex items-center gap-1.5">
                Avatar Preview
                <span class="px-2 py-0.5 rounded-full bg-purple-900/80 border border-purple-500/60 text-[10px] uppercase tracking-wide">
                  GF / BF upgrade only
                </span>
              </h2>
              <p class="text-[11px] text-purple-300/80">
                Layers are PNGs you uploaded ‚Äî skin, eyes, hair, clothes, jewelry, shoes.
              </p>
            </div>
            <div class="text-right text-[11px] text-purple-200/80 space-y-1">
              <div>
                Coins:
                <span id="closetCoinBalance"
                      class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-900/70 border border-amber-400/80 text-amber-200 text-[11px]">
                  <span>ü™ô</span><span>0</span>
                </span>
              </div>
              <div>
                Viewing:
                <span id="closetGenderLabel"
                      class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-900/80 border border-slate-600/70 text-[11px]">
                  <span>‚ôÄ</span><span>Female</span>
                </span>
              </div>
            </div>
          </div>

          <!-- Avatar preview stage -->
          <div class="avatar-stage mb-3" id="closetPreview">
            <!-- NOTE: order is controlled by JS using window.CARRIE_CLOSET_DATA.layers -->
            <img id="layer-skin"    class="avatar-layer" alt="Skin">
            <img id="layer-eyes"    class="avatar-layer" alt="Eyes">
            <img id="layer-hair"    class="avatar-layer" alt="Hair">
            <img id="layer-top"     class="avatar-layer" alt="Top / outfit">
            <img id="layer-bottom"  class="avatar-layer" alt="Bottom">
            <img id="layer-shoes"   class="avatar-layer" alt="Shoes">
            <img id="layer-jewelry" class="avatar-layer" alt="Jewelry">
          </div>

          <div class="text-[11px] text-purple-200/80 space-y-1">
            <p>
              ‚Ä¢ <b>Coins</b> here are local test coins for now. Later they‚Äôll sync with your 8BFR account.
            </p>
            <p>
              ‚Ä¢ To change the <b>default skin / outfit</b> we use in BF/GF chat, you‚Äôll be able to ‚ÄúSave to profile‚Äù in a future update.
            </p>
          </div>
        </section>

        <!-- RIGHT: Filters + items -->
        <section>
          <div class="flex flex-wrap items-center justify-between gap-3 mb-3">
            <div class="space-y-1">
              <h2 class="text-sm font-semibold text-purple-100">
                Items & Upgrades
              </h2>
              <p class="text-[11px] text-purple-300/80">
                Pick a category, then buy or equip items. More sets are coming.
              </p>
            </div>
            <div class="flex flex-wrap gap-2 text-[11px]">
              <!-- Gender filter -->
              <label class="filter-pill">
                <span class="opacity-80">Avatar</span>
                <select id="closetGenderFilter"
                        class="bg-transparent border-0 text-[11px] focus:outline-none focus:ring-0">
                  <option value="female">Female</option>
                  <option value="male">Male</option>
                </select>
              </label>

              <!-- Category filter -->
              <label class="filter-pill">
                <span class="opacity-80">Category</span>
                <select id="closetTypeFilter"
                        class="bg-transparent border-0 text-[11px] focus:outline-none focus:ring-0">
                  <option value="all">All</option>
                  <option value="skin">Skin</option>
                  <option value="hair">Hair</option>
                  <option value="top">Tops</option>
                  <option value="bottom">Bottoms</option>
                  <option value="eyes">Eyes</option>
                  <option value="jewelry">Jewelry</option>
                  <option value="shoes">Shoes</option>
                </select>
              </label>
            </div>
          </div>

          <!-- Items grid -->
          <div id="closetItemsGrid"
               class="grid gap-2.5 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 text-[13px]">
            <!-- JS will inject cards here -->
          </div>

          <div id="closetEmpty"
               class="hidden text-[11px] text-purple-300/80 mt-2">
            No items match this filter yet. Try a different category.
          </div>
        </section>
      </div>
    </div>

    <p class="mt-3 text-[11px] text-purple-300/70 text-center max-w-xl mx-auto">
      Carrie Closet is a beta feature for <b>Boyfriend / Girlfriend chat</b>.  
      Right now it previews outfits and coins locally; later we‚Äôll sync everything to your account and chat avatars.
    </p>
  </main>

  <!-- Global 8BFR UI (floating hamburger, etc.) -->
  <script src="scripts.js?v=1" defer></script>

  <!-- Closet data (uses your real image files) -->
  <script src="carrie-closet--data.js?v=1"></script>

  <!-- Closet logic (preview + coins + equip) -->
  <script src="carrie-closet.js?v=1"></script>
</body>
</html>
