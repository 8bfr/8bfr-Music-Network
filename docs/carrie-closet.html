<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Carrie Closet</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
:root{--ring:rgba(124,58,237,.55);--glass:rgba(12,6,24,.80)}
html,body{scroll-behavior:smooth}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif;background:radial-gradient(1200px 600px at 10% -10%,rgba(124,58,237,.30),transparent 60%),radial-gradient(900px 400px at 110% 10%,rgba(0,217,255,.22),transparent 60%),linear-gradient(#050011,#000);color:#eae6ff;margin:0;min-height:100vh;overflow-x:hidden}
header{position:relative;z-index:5;background:rgba(10,0,25,.96);border-bottom:1px solid rgba(124,58,237,.5);box-shadow:0 18px 40px rgba(0,0,0,.7)}
.shell{border-radius:20px;border:1px solid rgba(129,140,248,.6);background:radial-gradient(circle at 0 0,rgba(76,29,149,.40),transparent 60%),radial-gradient(circle at 100% 0,rgba(14,165,233,.22),transparent 60%),rgba(10,6,30,.96);box-shadow:0 18px 50px rgba(0,0,0,.8)}
#closetPreviewFrame{width:100%;max-width:1100px;margin:0 auto;border-radius:18px;border:1px solid rgba(148,163,255,0.55);overflow:hidden;height:800px;display:flex;align-items:center;justify-content:center;background-image:url("assets/images/closet/dressingroom.png?v=15");background-size:cover;background-position:center;background-repeat:no-repeat;position:relative}
#closetPreviewInner{position:relative;width:100%;max-width:480px;height:100%;transform:translateY(30px)}
#closetBaseImg{position:absolute;inset:0;height:100%;width:auto;object-fit:cover;display:block;z-index:1;left:50%;transform:translateX(-50%);filter:drop-shadow(0 0 3px #000)}
body[data-gender="female"][data-skin="light"]{--base-width:.89;--base-height:.99}
body[data-gender="female"][data-skin="dark"]{--base-width:.63;--base-height:.96}
body[data-gender="male"][data-skin="light"]{--base-width:1.00;--base-height:1.00}
body[data-gender="male"][data-skin="dark"]{--base-width:0.96;--base-height:1.00}
body[data-skin] #closetBaseImg{transform:translateX(-50%) scaleX(var(--base-width,1)) scaleY(var(--base-height,1))}
#closetOverlayHost{position:absolute;inset:0;pointer-events:none;z-index:2}
.layer-overlay{position:absolute;inset:0;width:100%;height:100%;object-fit:contain;pointer-events:none;--scale:1;--offset-x:0%;--offset-y:0%;transform:scale(var(--scale)) translateX(var(--offset-x)) translateY(var(--offset-y))}
.seg-btn{font-size:11px;padding:4px 10px;border-radius:999px;border:1px solid rgba(148,163,255,.45);background:rgba(15,23,42,.85);cursor:pointer;color:#e5e7eb}
.seg-btn.active{background:#7c3aed}
.tab-btn{font-size:11px;padding:4px 10px;border-radius:999px;border:1px solid rgba(148,163,255,.35);background:rgba(15,23,42,.8);cursor:pointer;color:#e5e7eb}
.tab-btn.active{background:#38bdf8;color:#000}
.closet-item-card{border-radius:12px;border:1px solid rgba(148,163,255,.4);background:rgba(15,23,42,.96);padding:.45rem;display:flex;gap:.45rem;cursor:pointer}
.closet-item-card.active{border-color:#22c55e}
.closet-item-thumb{width:44px;height:44px;border-radius:10px;border:1px solid rgba(148,163,255,.4);overflow:hidden}
.closet-item-thumb img{width:100%;height:100%;object-fit:contain}
</style>
</head>

<body data-gender="female" data-skin="light">

<header class="px-4 py-4">
  <h1 class="text-xl font-bold text-purple-300">Carrie Closet</h1>
</header>

<main class="max-w-6xl mx-auto px-4 pb-10 pt-5">
<div class="shell p-5 flex gap-6">

<section class="w-1/2">
  <div id="closetPreviewFrame">
    <div id="closetPreviewInner">
      <img id="closetBaseImg" src="assets/images/base/female/base_female_light.png">
      <div id="closetOverlayHost"></div>
    </div>
  </div>
</section>

<section class="flex-1">
  <div class="flex gap-2 mb-3">
    <button class="tab-btn active" data-cat="hair">Hair</button>
    <button class="tab-btn" data-cat="top">Tops</button>
    <button class="tab-btn" data-cat="bottom">Bottoms</button>
    <button class="tab-btn" data-cat="jewelry">Jewelry</button>
  </div>

  <div id="closetItemsGrid" class="grid grid-cols-2 gap-2"></div>
</section>

</div>
</main>

<script>
(function(){
const base="assets/images";
function item(o){return o}

const items=[
item({id:"f_hair_straight_copper",gender:"female",category:"hair",slot:"hair",name:"Straight Copper",img:base+"/hair/straight/female_straight_copper.png"}),
item({id:"f_hair_straight_black",gender:"female",category:"hair",slot:"hair",name:"Straight Black",img:base+"/hair/straight/female_straight_black.png"}),
item({id:"f_hair_wavy_blonde",gender:"female",category:"hair",slot:"hair",name:"Wavy Blonde",img:base+"/hair/wavy/female_wavy_blonde.png"}),
item({id:"f_top_bikini_red",gender:"female",category:"top",slot:"top",name:"Red Bikini Top",img:base+"/female_cloths/female_bikini_top_red.png"}),
item({id:"f_bottom_skirt",gender:"female",category:"bottom",slot:"bottom",name:"Skirt",img:base+"/female_cloths/female_skirt.png"}),
item({id:"f_jewel_ears",gender:"female",category:"jewelry",slot:"ears",name:"Earrings",imgLeft:base+"/female_jewlery/female_ear_left.png",imgRight:base+"/female_jewlery/female_ear_right.png",img:base+"/female_jewlery/female_ear_left.png"})
];

window.CARRIE_CLOSET_ITEMS = items;
})();

(function(){
const grid=document.getElementById("closetItemsGrid");
const overlay=document.getElementById("closetOverlayHost");
let currentCat="hair", equipped={};

function renderItems(){
  grid.innerHTML="";
  window.CARRIE_CLOSET_ITEMS.filter(i=>i.category===currentCat)
    .forEach(i=>{
      const d=document.createElement("div");
      d.className="closet-item-card";
      d.innerHTML=`<div class="closet-item-thumb"><img src="${i.img}"></div><div>${i.name}</div>`;
      d.onclick=()=>toggle(i);
      grid.appendChild(d);
    });
}

function toggle(i){
  equipped[i.slot]=i;
  renderOverlay();
}

function renderOverlay(){
  overlay.innerHTML="";
  Object.values(equipped).forEach(i=>{
    if(i.slot==="ears"){
      ["Left","Right"].forEach(side=>{
        const img=document.createElement("img");
        img.src=i["img"+side];
        img.className="layer-overlay";
        overlay.appendChild(img);
      });
    } else {
      const img=document.createElement("img");
      img.src=i.img;
      img.className="layer-overlay";
      overlay.appendChild(img);
    }
  });
}

document.querySelectorAll(".tab-btn").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll(".tab-btn").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    currentCat=b.dataset.cat;
    renderItems();
  };
});

renderItems();
})();
</script>

</body>
</html>
