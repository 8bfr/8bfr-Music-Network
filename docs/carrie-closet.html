<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Carrie Closet ‚Äî 8BFR Music Network</title>
  <meta name="description" content="Dress up Carrie with outfits, accessories, hair, eyes, and more using 8BFR coins." />
  <link rel="icon" href="assets/images/favicon.png" />
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --ring: rgba(124,58,237,.55);
      --glass: rgba(12,6,24,.80);
    }
    html,body { scroll-behavior:smooth; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(124,58,237,.35), transparent 60%),
        radial-gradient(900px 400px at 110% 10%, rgba(0,217,255,.22), transparent 60%),
        linear-gradient(#0b0014,#000);
      color:#eae6ff;
      margin:0;
      min-height:100vh;
      overflow-x:hidden;
    }
    header{
      position:relative;
      z-index:5;
      background:rgba(15,0,30,.9);
      border-bottom:1px solid rgba(124,58,237,.5);
    }

    .shell{
      border-radius:18px;
      border:1px solid rgba(124,58,237,.55);
      background:rgba(10,2,26,.95);
      box-shadow:0 16px 40px rgba(0,0,0,.75);
    }

    /* Hide global Carrie UI for this page, keep hamburger from scripts.js */
    #bubbleStack,
    #bubble-top-single,
    #carrieWrap,
    #globalAvatarSwitch {
      display:none !important;
    }

    /* Scrollbars for grid */
    .closet-grid-scroll {
      scrollbar-width: thin;
      scrollbar-color: rgba(129,140,248,.9) transparent;
    }
    .closet-grid-scroll::-webkit-scrollbar{
      width:7px;
    }
    .closet-grid-scroll::-webkit-scrollbar-thumb{
      background:rgba(129,140,248,.9);
      border-radius:999px;
    }

    /* Tag pills */
    .tag-pill{
      font-size:10px;
      padding:2px 7px;
      border-radius:999px;
      border:1px solid rgba(129,140,248,.6);
      background:rgba(15,23,42,.9);
    }

    /* Outfit card */
    .closet-card{
      border-radius:14px;
      border:1px solid rgba(129,140,248,.55);
      background:radial-gradient(circle at 0 0, rgba(124,58,237,.16), transparent 55%),
                 radial-gradient(circle at 100% 0, rgba(0,217,255,.18), transparent 55%),
                 #020014;
      padding:.6rem .7rem .5rem;
    }

    /* Avatar preview silhouette blocks */
    .avatar-block{
      border-radius:16px;
      border:1px solid rgba(129,140,248,.7);
      background:radial-gradient(circle at 10% 0, rgba(124,58,237,.25), transparent 55%),
                 radial-gradient(circle at 100% 0, rgba(0,217,255,.2), transparent 55%),
                 #020014;
      box-shadow:0 14px 30px rgba(0,0,0,.9);
    }
    .avatar-chip{
      font-size:10px;
      padding:2px 7px;
      border-radius:999px;
      border:1px solid rgba(148,163,255,.7);
      background:rgba(15,23,42,.95);
    }

    /* Small color dots */
    .color-dot{
      width:16px;
      height:16px;
      border-radius:999px;
      border:1px solid rgba(148,163,255,.9);
      box-shadow:0 0 0 1px rgba(15,23,42,1);
    }

    /* Mobile stacking tweaks */
    @media (max-width:768px){
      .avatar-column{
        order:1;
      }
      .grid-column{
        order:2;
      }
    }
  </style>
</head>
<body data-no-global-carrie="true">
  <header class="px-4 py-4">
    <div class="max-w-6xl mx-auto flex items-center justify-between gap-3">
      <div class="flex items-center gap-3">
        <img src="assets/images/logo_8bfr.svg"
             alt="8BFR logo"
             class="h-9 w-auto"
             onerror="this.onerror=null;this.src='assets/images/8bfr.png'">
        <div>
          <h1 class="text-xl sm:text-2xl font-extrabold">
            <span class="text-[#a855f7]">Carrie Closet</span>
          </h1>
          <p class="text-[11px] text-purple-300/80 -mt-0.5">
            Dress up Carrie ‚Ä¢ Coins required for upgrades
          </p>
        </div>
      </div>
      <div class="text-right text-[11px] space-y-1 hidden sm:block">
        <a href="chat-carrie.html" class="block text-[#00d9ff] underline/50 hover:underline">
          üí¨ Back to Carrie Chat
        </a>
        <a href="index.html" class="block text-purple-200/80 underline/30 hover:underline">
          ‚¨Ö Back to Home
        </a>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 pb-10 pt-4">
    <div class="shell p-4 sm:p-5">
      <!-- Top row: info + coins -->
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-3">
        <div class="space-y-1 text-[11px] sm:text-[12px]">
          <p class="text-purple-100">
            Choose outfits, accessories, hair, eyes, and skin tones for Carrie.
          </p>
          <p class="text-purple-200/80">
            <span class="font-semibold text-amber-300">Sexy / rare sets cost more coins.</span>
            All selections are visual only for now ‚Äî coin spending logic will be wired to the 8BFR wallet later.
          </p>
        </div>
        <div class="flex items-center gap-2 text-[11px]">
          <div class="px-3 py-2 rounded-xl border border-amber-400/70 bg-amber-900/30 text-amber-100 flex items-center gap-2">
            <span class="text-lg">ü™ô</span>
            <div>
              <div class="font-semibold">Your Coins (demo)</div>
              <div id="closetCoinBalance" class="text-[10px]">
                10,000 coins ‚Ä¢ wallet hookup coming soon
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Filters row -->
      <div class="flex flex-wrap items-center gap-2 mb-4 text-[11px]">
        <span class="uppercase tracking-[0.16em] text-purple-300/85 text-[10px]">
          Filter:
        </span>
        <button type="button" data-filter="all"
                class="tag-pill closet-filter active bg-purple-700/60 border-purple-400 text-purple-50">
          All
        </button>
        <button type="button" data-filter="outfit" class="tag-pill closet-filter">
          Outfits
        </button>
        <button type="button" data-filter="accessory" class="tag-pill closet-filter">
          Accessories
        </button>
        <button type="button" data-filter="hair" class="tag-pill closet-filter">
          Hair
        </button>
        <button type="button" data-filter="eyes" class="tag-pill closet-filter">
          Eyes
        </button>
        <button type="button" data-filter="skin" class="tag-pill closet-filter">
          Skin
        </button>
        <button type="button" data-filter="conservative" class="tag-pill closet-filter">
          Conservative
        </button>
        <button type="button" data-filter="sexy" class="tag-pill closet-filter">
          Sexy
        </button>
        <button type="button" data-filter="swim" class="tag-pill closet-filter">
          Swim
        </button>
      </div>

      <!-- Main layout -->
      <div class="grid md:grid-cols-[minmax(0,1.1fr)_minmax(0,1.6fr)] gap-4">
        <!-- Avatar / loadout column -->
        <section class="avatar-column space-y-3">
          <!-- Avatar preview card -->
          <div class="avatar-block p-3 sm:p-4">
            <div class="flex items-center justify-between gap-2 mb-2">
              <div>
                <h2 class="text-sm font-semibold text-purple-100">
                  Avatar Preview
                </h2>
                <p class="text-[10px] text-purple-200/80">
                  Equip anything from the closet ‚Äî preview updates in real time.
                </p>
              </div>
              <div class="text-right text-[10px] text-purple-200/80">
                <div id="closetLoadoutCost">Total: 0 coins</div>
                <div class="text-[9px] opacity-80">
                  (visual demo only)
                </div>
              </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-3">
              <!-- Video / silhouette -->
              <div class="flex-1 flex flex-col items-center">
                <div class="relative w-full max-w-[220px] mx-auto">
                  <div class="absolute -top-2 -left-2 px-2 py-0.5 rounded-full bg-purple-900/80 border border-purple-400/70 text-[9px] uppercase tracking-[0.16em]">
                    Carrie
                  </div>
                  <video
                    id="closetAvatarVideo"
                    src="assets/videos/carrie_business_animate.webm"
                    autoplay
                    loop
                    muted
                    playsinline
                    class="w-full rounded-2xl border border-purple-500/70 bg-black/40 shadow-[0_18px_45px_rgba(0,0,0,.95)]"
                  ></video>
                </div>
                <p class="mt-2 text-[10px] text-purple-200/80 text-center max-w-xs">
                  Outfit, hair, eyes, and accessories are tracked below. Later this preview can sync to the 3D avatar system.
                </p>
              </div>

              <!-- Current loadout summary -->
              <div class="flex-1 space-y-2 text-[11px]">
                <div class="flex items-center justify-between">
                  <span class="avatar-chip">Outfit</span>
                  <span id="previewOutfitCost" class="text-amber-300 text-[10px]">0 coins</span>
                </div>
                <div id="previewOutfitLabel" class="text-[11px] text-purple-50">
                  Default system outfit
                </div>

                <div class="flex items-center justify-between mt-2">
                  <span class="avatar-chip">Accessories</span>
                  <span id="previewAccessoryCost" class="text-amber-300 text-[10px]">0 coins</span>
                </div>
                <div id="previewAccessoryLabel" class="text-[11px] text-purple-50">
                  None equipped
                </div>

                <div class="mt-2 grid grid-cols-[auto,1fr] gap-x-2 gap-y-1">
                  <div class="flex items-center gap-1">
                    <span class="avatar-chip">Hair</span>
                  </div>
                  <div class="flex items-center gap-1">
                    <span id="previewHairColorDot" class="color-dot" style="background:#4b5563;"></span>
                    <span id="previewHairLabel" class="text-[11px] text-purple-50">
                      Default dark
                    </span>
                  </div>

                  <div class="flex items-center gap-1 mt-1">
                    <span class="avatar-chip">Eyes</span>
                  </div>
                  <div class="flex items-center gap-1 mt-1">
                    <span id="previewEyesColorDot" class="color-dot" style="background:#1d4ed8;"></span>
                    <span id="previewEyesLabel" class="text-[11px] text-purple-50">
                      Deep blue
                    </span>
                  </div>

                  <div class="flex items-center gap-1 mt-1">
                    <span class="avatar-chip">Skin</span>
                  </div>
                  <div class="flex items-center gap-1 mt-1">
                    <span id="previewSkinColorDot" class="color-dot" style="background:#f5d0c5;"></span>
                    <span id="previewSkinLabel" class="text-[11px] text-purple-50">
                      Default medium warm
                    </span>
                  </div>
                </div>

                <div class="mt-3 text-[10px] text-purple-200/80">
                  üìù Coins are **not** deducted yet ‚Äî this is a safe sandbox to plan sets and prices.
                </div>
              </div>
            </div>
          </div>

          <!-- Equipped items list -->
          <div class="avatar-block p-3 mt-3">
            <div class="flex items-center justify-between mb-1">
              <h3 class="text-[12px] font-semibold text-purple-100">
                Equipped Items
              </h3>
              <button
                id="closetClearLoadout"
                type="button"
                class="text-[10px] text-rose-200/90 hover:text-rose-100 hover:underline"
              >
                Clear all
              </button>
            </div>
            <ul id="closetEquippedList" class="text-[10px] text-purple-200/90 space-y-1">
              <li>No items equipped yet.</li>
            </ul>
          </div>
        </section>

        <!-- Items grid column -->
        <section class="grid-column">
          <div class="flex items-center justify-between text-[11px] mb-2">
            <div class="flex items-center gap-2">
              <span class="avatar-chip">Closet Items</span>
              <span id="closetItemCount" class="text-purple-200/80">
                Loading Carrie Closet‚Ä¶
              </span>
            </div>
            <div class="flex items-center gap-2">
              <label class="flex items-center gap-1 text-[10px] text-purple-200/80">
                <span>Sort:</span>
                <select id="closetSort" class="bg-slate-950/80 border border-purple-500/60 rounded-full px-2 py-0.5 text-[10px]">
                  <option value="default">Featured</option>
                  <option value="cost-low">Cost (low ‚Üí high)</option>
                  <option value="cost-high">Cost (high ‚Üí low)</option>
                  <option value="style">Style A‚ÜíZ</option>
                </select>
              </label>
            </div>
          </div>

          <div
            id="closetGrid"
            class="closet-grid-scroll max-h-[540px] overflow-y-auto grid grid-cols-1 sm:grid-cols-2 gap-2.5 text-[11px]"
          >
            <!-- JS will inject cards here -->
          </div>
        </section>
      </div>
    </div>

    <p class="mt-3 text-[10px] text-purple-300/70 text-center max-w-xl mx-auto">
      Closet logic is local to this page. Later we can sync your outfits and purchased items to Supabase profiles and the main Carrie avatar.
    </p>
  </main>

  <!-- Global 8BFR UI (hamburger etc.) -->
  <script src="scripts.js?v=1" defer></script>

  <!-- Carrie Closet logic -->
  <script src="carrie-closet.js?v=1"></script>
</body>
</html>
