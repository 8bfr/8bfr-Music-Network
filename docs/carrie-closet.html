<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Carrie Closet â€” 8BFR Music Network</title>
  <meta name="description" content="Customize your Carrie, James, or partner avatar with outfits, hair, accessories and more using 8BFR coins." />
  <link rel="icon" href="assets/images/favicon.png?v=15" />
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --ring: rgba(124,58,237,.55);
      --glass: rgba(12,6,24,.80);
    }

    html, body { scroll-behavior:smooth; }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(124,58,237,.30), transparent 60%),
        radial-gradient(900px 400px at 110% 10%, rgba(0,217,255,.22), transparent 60%),
        linear-gradient(#050011,#000);
      color:#eae6ff;
      margin:0;
      min-height:100vh;
      overflow-x:hidden;
    }

    header {
      position:relative;
      z-index:5;
      background:rgba(10,0,25,.96);
      border-bottom:1px solid rgba(124,58,237,.5);
      box-shadow:0 18px 40px rgba(0,0,0,.7);
    }

    .shell {
      border-radius:20px;
      border:1px solid rgba(129,140,248,.6);
      background:
        radial-gradient(circle at 0 0,rgba(76,29,149,.40),transparent 60%),
        radial-gradient(circle at 100% 0,rgba(14,165,233,.22),transparent 60%),
        rgba(10,6,30,.96);
      box-shadow:0 18px 50px rgba(0,0,0,.8);
    }

    #closetPreviewFrame {
      width: 100%;
      max-width: 1100px;
      margin: 0 auto;
      border-radius: 18px;
      border: 1px solid rgba(148,163,255,0.55);
      overflow: hidden;

      height: 800px;
      display: flex;
      align-items: center;
      justify-content: center;

      background-image: url("assets/images/closet/dressingroom.png?v=15");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;

      position: relative;
    }

    #closetPreviewInner {
      position: relative;
      width: 100%;
      max-width: 480px;
      height: 100%;
      transform: translateY(30px);
    }

    #closetBaseImg {
      position: absolute;
      inset: 0;
      height: 100%;
      width: auto;
      object-fit: cover;
      display: block;
      z-index: 1;
      left: 50%;
      transform: translateX(-50%);
      filter: drop-shadow(0 0 3px #000);
    }

    /* Base avatar widths/heights */
    body[data-gender="female"][data-skin="light"]{--base-width:.89;--base-height:.99;}
    body[data-gender="female"][data-skin="dark"]{--base-width:.63;--base-height:.96;}
    body[data-gender="male"][data-skin="light"]{--base-width:1.00;--base-height:1.00;}
    body[data-gender="male"][data-skin="dark"]{--base-width:0.96;--base-height:1.00;}
    body[data-skin] #closetBaseImg{transform: translateX(-50%) scaleX(var(--base-width, 1)) scaleY(var(--base-height, 1));}

    #closetOverlayHost img { filter: drop-shadow(0 0 2px #000); }
    #closetOverlayHost { position:absolute; inset:0; pointer-events:none; z-index:2; }

    .layer-overlay {
      position:absolute; inset:0; width:100%; height:100%; object-fit:contain; pointer-events:none; image-rendering:auto;

      --scale-left-light: var(--scale-light); --offset-x-left-light: var(--offset-x-light); --offset-y-left-light: var(--offset-y-light);
      --scale-left-dark: var(--scale-dark); --offset-x-left-dark: var(--offset-x-dark); --offset-y-left-dark: var(--offset-y-dark);
      --scale-right-light: var(--scale-light); --offset-x-right-light: var(--offset-x-light); --offset-y-right-light: var(--offset-y-light);
      --scale-right-dark: var(--scale-dark); --offset-x-right-dark: var(--offset-x-dark); --offset-y-right-dark: var(--offset-y-dark);

      --scale:1; --offset-x:0%; --offset-y:0%;
      --scale-light: var(--scale); --offset-x-light: var(--offset-x); --offset-y-light: var(--offset-y);
      --scale-dark: var(--scale); --offset-x-dark: var(--offset-x); --offset-y-dark: var(--offset-y);

      --scale-use: var(--scale); --offset-x-use: var(--offset-x); --offset-y-use: var(--offset-y);
      transform: scale(var(--scale-use)) translateX(var(--offset-x-use)) translateY(var(--offset-y-use));
    }

    body[data-skin="light"] .layer-overlay{--scale-use: var(--scale-light); --offset-x-use: var(--offset-x-light); --offset-y-use: var(--offset-y-light);}
    body[data-skin="dark"] .layer-overlay{--scale-use: var(--scale-dark); --offset-x-use: var(--offset-x-dark); --offset-y-use: var(--offset-y-dark);}
    body[data-skin="light"] .layer-left{--scale-use: var(--scale-left-light); --offset-x-use: var(--offset-x-left-light); --offset-y-use: var(--offset-y-left-light);}
    body[data-skin="light"] .layer-right{--scale-use: var(--scale-right-light); --offset-x-use: var(--offset-x-right-light); --offset-y-use: var(--offset-y-right-light);}
    body[data-skin="dark"] .layer-left{--scale-use: var(--scale-left-dark); --offset-x-use: var(--offset-x-left-dark); --offset-y-use: var(--offset-y-left-dark);}
    body[data-skin="dark"] .layer-right{--scale-use: var(--scale-right-dark); --offset-x-use: var(--offset-x-right-dark); --offset-y-use: var(--offset-y-right-dark);}

    /* Pill tags, buttons, closet cards omitted for brevity, unchanged from original */

    /* FEMALE ITEMS â€” HAIR / TOPS / BOTTOMS / BIKINI / JEWELRY */
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_blonde{transform-origin:center top; --scale:0.50; --offset-x:0%; --offset-y:-12%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_blonde{transform-origin:center top; --scale:0.50; --offset-x:0%; --offset-y:-12%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_brown{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_brown{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_copper{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-22%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_copper{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-22%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_ginger{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_ginger{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_pastel_blue{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-21%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_pastel_blue{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-21%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_pastel_pink{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_pastel_pink{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_pastel_purple{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_pastel_purple{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-20%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_platinum{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-21%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_platinum{transform-origin:center top; --scale:0.60; --offset-x:0%; --offset-y:-21%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_hair_straight_black{transform-origin:center top; --scale:0.70; --offset-x:0%; --offset-y:-3%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_hair_straight_black{transform-origin:center top; --scale:0.70; --offset-x:0%; --offset-y:-3%;}
    
    /* Tops / Bottoms / Bikini / Jewelry â€” same as your current CSS */
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-u_top_tank{transform-origin:center top; --scale:0.75; --offset-x:0%; --offset-y:-12%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_top_tank{transform-origin:center top; --scale:0.65; --offset-x:0%; --offset-y:-6%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-u_top_tee{transform-origin:center top; --scale:0.65; --offset-x:-1%; --offset-y:-1%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-u_top_tee{transform-origin:center top; --scale:0.58; --offset-x:0%; --offset-y:5%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_top_bikini_red{transform-origin:center top; --scale:0.37; --offset-x:-1%; --offset-y:38%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_top_bikini_red{transform-origin:center top; --scale:0.35; --offset-x:0%; --offset-y:41%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_bottom_shorts{transform-origin:center top; --scale:.58; --offset-x:-1%; --offset-y:44%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_bottom_shorts{transform-origin:center top; --scale:.48; --offset-x:-0%; --offset-y:56%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_bottom_skirt{transform-origin:center top; --scale:.60; --offset-x:-0%; --offset-y:30%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_bottom_skirt{transform-origin:center top; --scale:.55; --offset-x:-0%; --offset-y:36%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_bottom_bikini_red{transform-origin:center top; --scale:.83; --offset-x:-1%; --offset-y:10%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_bottom_bikini_red{transform-origin:center top; --scale:.75; --offset-x:-0%; --offset-y:16%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_jewel_necklace{transform-origin:center top; --scale:.35; --offset-x:0%; --offset-y:07%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_jewel_necklace{transform-origin:center top; --scale:.35; --offset-x:0%; --offset-y:09%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_jewel_belly{transform-origin:center top; --scale:.15; --offset-x:0%; --offset-y:250%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_jewel_belly{transform-origin:center top; --scale:.15; --offset-x:0%; --offset-y:250%;}
    body[data-gender="female"][data-skin="light"] .layer-overlay.item-f_jewel_ears{transform-origin:center top; --scale:.25; --offset-x:-40%; --offset-y:-50%;}
    body[data-gender="female"][data-skin="dark"] .layer-overlay.item-f_jewel_ears{transform-origin:center top; --scale:.25; --offset-x:40%; --offset-y:-50%;}

  </style>
</head>

<body data-no-global-carrie="true" data-gender="female">

  <!-- TEST INSERT -->
  <h1 style="color:red; font-size:30px; text-align:center; margin-top:10px;">
   <!-- TEST CLOSET 999 -->
  </h1>

  <header class="px-4 py-4">
    <div class="max-w-6xl mx-auto flex items-center justify-between gap-3">
      <div class="flex items-center gap-3">
        <img src="assets/images/logo_8bfr.svg?v=15" alt="8BFR logo" class="h-9 w-auto" onerror="this.onerror=null;this.src='assets/images/8bfr.png?v=15'">
        <div>
          <h1 class="text-xl sm:text-2xl font-extrabold">
            <span class="text-[#a855f7]">Carrie Closet</span>
            <span class="text-xs sm:text-sm font-semibold align-middle ml-1 text-emerald-300/80">beta</span>
          </h1>
          <p class="text-[11px] text-purple-300/80 -mt-0.5">
            Dress your AI avatar for BF / GF chat and future upgrades.
          </p>
        </div>
      </div>
      <div class="flex flex-col items-end gap-1">
        <a href="carrie-chat.html" class="text-[#00d9ff] text-[11px] sm:text-xs underline/50 hover:underline">
          â¬… Back to Carrie Chat
        </a>
        <span class="pill-tag pill-tag-soft text-[10px]">
          <span>ðŸª™</span> Coins shop connects from here later
        </span>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 pb-10 pt-5">
    <div class="shell p-4 sm:p-5 lg:p-6">
      <div class="flex flex-col lg:flex-row gap-6 lg:gap-8">
        <!-- LEFT: Preview + base controls -->
        <section class="lg:w-[60%] space-y-4">
          <div class="flex items-center justify-between gap-2">
            <div class="flex flex-wrap items-center gap-2">
              <span class="pill-tag text-[10px]">ðŸ§¬ Avatar Preview</span>
              <span id="closetPreviewLabel" class="text-[11px] text-purple-200/80">
                Female â€¢ Light skin â€¢ Bikini base
              </span>
            </div>
            <span class="text-[10px] text-purple-200/80">BF / GF chat only</span>
          </div>

          <div id="closetPreviewFrame">
            <div id="closetPreviewInner
              ...  
          </div>    

          <div id="closetFilters" class="flex flex-wrap gap-2">
            <!-- Filled by JS -->
          </div>

          <div id="closetItemsContainer" class="grid grid-cols-2 sm:grid-cols-3 gap-2 mt-2">
            <!-- Closet items cards populated by JS -->
          </div>

          <p id="closetError" class="hidden mt-2 text-red-400">
            Error loading items.
          </p>
          <p id="closetEmpty" class="hidden mt-2 text-purple-300">
            No items found.
          </p>
        </section>
      </div>
    </div>
  </main>

  <script src="data.js?v=15"></script>
  <script src="closet.js?v=15"></script>

</body>
</html>
