<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>8BFR ‚Äî Artist Profile</title>
<link rel="icon" href="assets/images/favicon.png" />
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body{background:linear-gradient(#0b0014,#000);color:#eae6ff;font-family:system-ui;margin:0}
  .card{border:1px solid rgba(124,58,237,.35);background:#0c0618;border-radius:14px;box-shadow:0 0 20px rgba(124,58,237,.18);padding:16px}
  .input{width:100%;padding:.55rem .7rem;background:#120327;color:#fff;border:1px solid rgba(124,58,237,.5);border-radius:.55rem}
  .btn{display:inline-block;background:#120327;border:1px solid rgba(124,58,237,.6);color:#eae6ff;padding:.55rem .9rem;border-radius:.7rem;text-decoration:none}
  .btn:hover{background:#190536}.btn-primary{background:#7c3aed;border-color:#7c3aed;color:#fff}
  header{background:rgba(15,0,30,.9);border-bottom:1px solid rgba(124,58,237,.5)}
  .cover{height:180px;border-radius:14px;background:#120327 url('assets/images/bg_neon.png') center/cover no-repeat;border:1px solid rgba(124,58,237,.35)}
  .avatar{width:120px;height:120px;border-radius:16px;object-fit:cover;border:2px solid rgba(124,58,237,.5);background:#120327}
  .grid-auto{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
</style>
</head>
<body>
<header class="px-4 py-4">
  <div class="max-w-6xl mx-auto flex items-center justify-between">
    <a href="index.html" class="btn">‚Üê Back</a>
    <h1 class="text-xl font-bold">Artist Profile ‚Äî 8BFR</h1>
    <a href="mailto:8bfr.music@gmail.com" class="text-[#00d9ff] hover:underline">Contact</a>
  </div>
</header>

<main class="max-w-6xl mx-auto px-4 py-5">
  <div class="cover mb-4" id="coverView"></div>
  <div class="flex items-center gap-4 mb-6">
    <img id="avatarView" class="avatar" src="assets/images/default_user_32_40.png" alt="Avatar">
    <div>
      <h2 id="nameView" class="text-2xl font-extrabold">8BFR</h2>
      <div id="tagView" class="text-purple-300/90">Artist ‚Ä¢ Producer</div>
      <div class="mt-2 flex gap-2">
        <a class="btn btn-primary" href="https://open.spotify.com/artist/127tw52iDXr7BvgB0IGG2x" target="_blank">Spotify</a>
        <a class="btn" id="shareBtn">Share</a>
      </div>
    </div>
  </div>

  <div class="grid-auto">
    <div class="card">
      <h3 class="font-bold mb-2">Edit Profile</h3>
      <div class="grid sm:grid-cols-2 gap-3">
        <div><label>Artist Name</label><input id="name" class="input" value="8BFR"></div>
        <div><label>Tagline</label><input id="tagline" class="input" value="Artist ‚Ä¢ Producer"></div>
        <div><label>Spotify Link</label><input id="spotify" class="input" value="https://open.spotify.com/artist/127tw52iDXr7BvgB0IGG2x"></div>
        <div><label>Social ‚Äî Instagram</label><input id="ig" class="input" placeholder="https://instagram.com/..."></div>
        <div><label>Social ‚Äî TikTok</label><input id="tt" class="input" placeholder="https://tiktok.com/@..."></div>
        <div><label>Social ‚Äî Facebook</label><input id="fb" class="input" placeholder="https://facebook.com/..."></div>
        <div class="sm:col-span-2"><label>Bio</label><textarea id="bio" class="input" rows="4" placeholder="Tell your story..."></textarea></div>
        <div><label>Avatar Photo</label><input id="avatar" type="file" accept="image/*" class="input"></div>
        <div><label>Cover Photo</label><input id="cover" type="file" accept="image/*" class="input"></div>
      </div>
      <div class="mt-3 flex gap-2">
        <button id="save" class="btn btn-primary">Save</button>
        <button id="reset" class="btn">Reset</button>
      </div>
    </div>

    <div class="card">
      <h3 class="font-bold mb-2">Music Uploads</h3>
      <div class="text-sm opacity-80 mb-2">For now this saves locally (demo). We‚Äôll hook Supabase next.</div>
      <input id="trackTitle" class="input mb-2" placeholder="Track title">
      <input id="trackUrl" class="input mb-2" placeholder="https:// (audio or page)">
      <button id="addTrack" class="btn">Add</button>
      <ul id="tracks" class="mt-3 space-y-2 text-sm"></ul>
    </div>

    <div class="card">
      <h3 class="font-bold mb-2">Story</h3>
      <textarea id="story" class="input" rows="6" placeholder="Long-form story..."></textarea>
    </div>

    <div class="card">
      <h3 class="font-bold mb-2">Post</h3>
      <textarea id="postText" class="input" rows="3" placeholder="Say something..."></textarea>
      <input id="postMedia" class="input mt-2" type="file" accept="image/*,video/*">
      <button id="addPost" class="btn mt-2">Publish</button>
      <div id="feed" class="mt-3 space-y-3"></div>
    </div>

    <div class="card">
      <h3 class="font-bold mb-2">Connections</h3>
      <div class="flex items-center gap-3 mb-2">
        <label class="flex items-center gap-2 text-sm opacity-90"><input id="hideNames" type="checkbox"> Hide names</label>
        <button id="addFollower" class="btn">+ Follower</button>
        <button id="addFollowing" class="btn">+ Following</button>
        <button id="addFriend" class="btn">+ Friend</button>
        <button id="addFav" class="btn">+ Favorite</button>
      </div>
      <div class="grid sm:grid-cols-2 gap-3 text-sm">
        <div><b>Followers</b><ul id="followers" class="list-disc pl-5"></ul></div>
        <div><b>Following</b><ul id="following" class="list-disc pl-5"></ul></div>
        <div><b>Friends</b><ul id="friends" class="list-disc pl-5"></ul></div>
        <div><b>Favorites</b><ul id="favorites" class="list-disc pl-5"></ul></div>
      </div>
    </div>
  </div>

  <div class="card mt-5">
    <h3 class="font-bold mb-2">Spotify Embed</h3>
    <iframe id="spotifyEmbed" style="border-radius:12px" src="https://open.spotify.com/embed/artist/127tw52iDXr7BvgB0IGG2x?theme=0" width="100%" height="152" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture" loading="lazy"></iframe>
  </div>
</main>

<script>
const K = 'artist_profile_8bfr_v1';
const $ = sel => document.querySelector(sel);
const read = k => JSON.parse(localStorage.getItem(k) || 'null');
const write = (k,v) => localStorage.setItem(k, JSON.stringify(v));
const toDataUrl = file => new Promise(r=>{const fr=new FileReader();fr.onload=()=>r(fr.result);fr.readAsDataURL(file)});

function load(){
  const d = read(K) || {};
  $('#name').value = d.name || '8BFR';
  $('#tagline').value = d.tagline || 'Artist ‚Ä¢ Producer';
  $('#spotify').value = d.spotify || 'https://open.spotify.com/artist/127tw52iDXr7BvgB0IGG2x';
  $('#ig').value = d.ig || ''; $('#tt').value = d.tt || ''; $('#fb').value = d.fb || '';
  $('#bio').value = d.bio || ''; $('#story').value = d.story || '';
  $('#nameView').textContent = $('#name').value; $('#tagView').textContent = $('#tagline').value;
  if(d.avatarData) $('#avatarView').src = d.avatarData;
  if(d.coverData) $('#coverView').style.backgroundImage = `url(${d.coverData})`;
  $('#spotifyEmbed').src = (d.spotify?.includes('open.spotify.com')? d.spotify : 'https://open.spotify.com/artist/127tw52iDXr7BvgB0IGG2x').replace('/artist/','/embed/artist/');

  const tracks = d.tracks || []; $('#tracks').innerHTML = tracks.map(t=>`<li>üéµ <a class="text-blue-400" href="${t.url}" target="_blank" rel="noopener">${t.title}</a></li>`).join('');
  const feed = d.feed || []; $('#feed').innerHTML = feed.map(p=>`<div class="border border-purple-400/30 rounded p-2">${p.text||''}${p.media?`<div class="mt-2"><img src="${p.media}" class="rounded max-h-48"></div>`:''}</div>`).join('');
  const renderList = (id, arr)=> $(id).innerHTML = (arr||[]).map(n=>`<li>${$('#hideNames').checked ? 'Hidden' : n}</li>`).join('');
  $('#followers').dataset.store='followers'; $('#following').dataset.store='following'; $('#friends').dataset.store='friends'; $('#favorites').dataset.store='favorites';
  renderList('#followers', d.followers||[]); renderList('#following', d.following||[]); renderList('#friends', d.friends||[]); renderList('#favorites', d.favorites||[]);
}
load();

$('#save').onclick = async ()=>{
  const d = read(K) || {};
  d.name = $('#name').value; d.tagline = $('#tagline').value; d.spotify = $('#spotify').value;
  d.ig = $('#ig').value; d.tt = $('#tt').value; d.fb = $('#fb').value;
  d.bio = $('#bio').value; d.story = $('#story').value;
  if($('#avatar').files[0]) d.avatarData = await toDataUrl($('#avatar').files[0]);
  if($('#cover').files[0])  d.coverData  = await toDataUrl($('#cover').files[0]);
  write(K,d); load(); alert('Saved locally üëç');
};
$('#reset').onclick = ()=>{ localStorage.removeItem(K); location.reload(); };

$('#addTrack').onclick = ()=>{
  const d = read(K)||{}; d.tracks = d.tracks||[];
  const title = $('#trackTitle').value.trim(), url = $('#trackUrl').value.trim(); if(!title||!url) return;
  d.tracks.push({title,url}); write(K,d); $('#trackTitle').value=''; $('#trackUrl').value=''; load();
};

$('#addPost').onclick = async ()=>{
  const d = read(K)||{}; d.feed = d.feed||[];
  const text = $('#postText').value.trim(); let media=null; if($('#postMedia').files[0]) media = await toDataUrl($('#postMedia').files[0]);
  if(!text && !media) return; d.feed.unshift({text,media,ts:Date.now()}); write(K,d); $('#postText').value=''; $('#postMedia').value=''; load();
};

function addNameTo(listKey){
  const name = prompt('Name/handle?'); if(!name) return; const d=read(K)||{}; d[listKey]=d[listKey]||[]; d[listKey].push(name); write(K,d); load();
}
$('#addFollower').onclick = ()=>addNameTo('followers'); $('#addFollowing').onclick=()=>addNameTo('following'); $('#addFriend').onclick=()=>addNameTo('friends'); $('#addFav').onclick=()=>addNameTo('favorites');
$('#hideNames').onchange = load;

$('#shareBtn').onclick = async ()=>{
  const url = location.href;
  if(navigator.share){ try{ await navigator.share({title:'8BFR ‚Äî Artist Profile', url});}catch{} }
  else { navigator.clipboard.writeText(url); alert('Profile link copied!'); }
};
</script>
</body>
</html>
