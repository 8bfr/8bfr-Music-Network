<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>8BFR Music Network â€” Create â€¢ Connect â€¢ Collab (HOME v11)</title>
  <meta name="description" content="Empowering creators, connecting the world â€” 8BFR Music Network." />
  <link rel="icon" href="assets/images/favicon.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --ring: rgba(124,58,237,.55);
      --glass: rgba(12,6,24,.70);
    }
    html,body{ scroll-behavior:smooth; }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(124,58,237,.35), transparent 60%),
        radial-gradient(900px 400px at 110% 10%, rgba(0,217,255,.22), transparent 60%),
        linear-gradient(#0b0014,#000);
      color:#eae6ff;
      overflow-x:hidden;
      margin:0;
      min-height:100vh;
    }
    header{
      position:relative;
      z-index:5;
      background:rgba(15,0,30,.9);
      border-bottom:1px solid rgba(124,58,237,.5);
    }
    .hero{
      position:relative;
      height:320px;
      border-radius:16px;
      overflow:hidden;
      border:1px solid rgba(124,58,237,.4);
      box-shadow:0 0 24px rgba(124,58,237,.35);
    }
    .hero::before{
      content:"";
      position:absolute;
      inset:0;
      background:url('assets/images/bg_neon.png') center/cover no-repeat;
      filter:brightness(.9) saturate(1.05);
    }
    #heroText{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      text-align:center;
      padding:0 1rem;
    }
    .marquee{
      overflow:hidden;
      white-space:nowrap;
      background:rgba(12,0,25,.9);
      border-top:1px solid #7c3aed;
      border-bottom:1px solid #7c3aed;
    }
    .marquee span{
      display:inline-block;
      padding-left:100%;
      animation:marq 22s linear infinite;
      color:#cbbffb;
      text-shadow:0 0 12px #7c3aed;
    }
    @keyframes marq{
      0%{ transform:translateX(0); }
      100%{ transform:translateX(-100%); }
    }
    .section-card{
      border:1px solid rgba(124,58,237,.35);
      background:#0c0618;
      border-radius:16px;
      box-shadow:0 0 24px rgba(124,58,237,.15);
    }
    .btn{
      display:inline-block;
      background:#120327;
      border:1px solid rgba(124,58,237,.6);
      color:#eae6ff;
      padding:.6rem .95rem;
      border-radius:.75rem;
      text-decoration:none;
      font-size:.9rem;
    }
    .btn:hover{ background:#190536; }
    .btn-primary{
      background:#7c3aed;
      border-color:#7c3aed;
      color:#fff;
    }
    .btn-primary:hover{
      filter:brightness(1.05);
    }
    
    /* Admin edit buttons */
    .admin-edit-btn{
      display:inline-flex;
      align-items:center;
      gap:0.3rem;
      background:rgba(245,158,11,0.15);
      border:1px solid rgba(245,158,11,0.4);
      color:#fbbf24;
      padding:0.35rem 0.65rem;
      border-radius:0.5rem;
      font-size:0.8rem;
      cursor:pointer;
      transition:all 0.2s;
    }
    .admin-edit-btn:hover{
      background:rgba(245,158,11,0.25);
      border-color:rgba(245,158,11,0.6);
      color:#fcd34d;
    }

    /* Ad carousel */
    <!-- ONLY REPLACE THE AD CAROUSEL SCRIPT (lines 854-923) with this: -->

<script>
    // featured ads carousel (index only) - UPDATED TO LOAD FROM SUPABASE
    (function(){
      const track = document.getElementById('adTrack');
      const prev  = document.getElementById('adPrev');
      const next  = document.getElementById('adNext');
      const pause = document.getElementById('adPause');
      if (!track || !prev || !next || !pause) return;

      // Default ads (fallback when no approved ads exist)
      const defaultAds = [
        { img:'assets/images/ad_banner_1.jpg', url:'ads.html#ad1' },
        { img:'assets/images/ad_banner_2.jpg', url:'ads.html#ad2' },
        { img:'assets/images/ad_banner_3.jpg', url:'ads.html#ad3' },
        { img:'assets/images/ad_banner_4.jpg', url:'ads.html#ad4' },
        { img:'assets/images/ad_banner_5.jpg', url:'ads.html#ad5' }
      ];

      let ads = [...defaultAds]; // Start with defaults
      let i=0, paused=false, t=null;

      // Load approved ads from Supabase
      async function loadApprovedAds() {
        try {
          if (!window.supabase) {
            console.log('Supabase not loaded, using default ads');
            return;
          }
          
          const supabase = window.supabase.createClient(
            'https://novbuvwpjnxwwvdekjhr.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5vdmJ1dndwam54d3d2ZGVramhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExODkxODUsImV4cCI6MjA3Njc2NTE4NX0.1UUkdGafh6ZplAX8hi7Bvj94D2gvFQZUl0an1RvcSA0'
          );

          const { data, error } = await supabase
            .from('ads')
            .select('*')
            .eq('status', 'approved')
            .gte('expires_at', new Date().toISOString())
            .order('approved_at', { ascending: false })
            .limit(5);

          if (!error && data && data.length > 0) {
            // Replace default ads with approved ads
            ads = data.map((ad, idx) => ({
              img: ad.image_url || defaultAds[idx].img,
              url: ad.link_url || 'ads.html#ad' + (idx + 1),
              title: ad.title || 'Sponsored Ad'
            }));
            
            // Fill remaining slots with defaults if needed
            while (ads.length < 5) {
              ads.push(defaultAds[ads.length]);
            }
            
            console.log('Loaded ' + data.length + ' approved ads from Supabase');
          } else {
            console.log('No approved ads found, using defaults');
          }
        } catch (err) {
          console.log('Error loading ads, using defaults:', err);
        }
      }

      function slide(idx){
        i = (idx+ads.length) % ads.length;
        const old = track.querySelector('.ad-slide.show');
        const a = document.createElement('a');
        a.className = 'ad-slide';
        a.href = ads[i].url || '#';
        a.target = '_blank';
        a.rel = 'noopener';

        const img = new Image();
        img.src = ads[i].img;
        img.alt = ads[i].title || 'Ad slot ' + (i+1);
        a.appendChild(img);
        track.appendChild(a);

        requestAnimationFrame(()=>a.classList.add('show'));
        if (old){ setTimeout(()=>old.remove(),380); }
      }

      function auto(){ if(paused) return; slide(i+1); schedule(); }
      function schedule(){ clearTimeout(t); t = setTimeout(auto, 5000); }

      prev.onclick = () => { if(!paused){ paused=true; pause.textContent='Play'; } slide(i-1); };
      next.onclick = () => { if(!paused){ paused=true; pause.textContent='Play'; } slide(i+1); };
      pause.onclick = () => {
        paused = !paused;
        pause.textContent = paused ? 'Play' : 'Pause';
        if (!paused) schedule(); else clearTimeout(t);
      };

      // swipe on touch
      let sx=0, dx=0, down=false;
      track.addEventListener('touchstart', e=>{
        down=true;
        sx=e.touches[0].clientX;
        dx=0;
        clearTimeout(t);
      }, {passive:true});
      track.addEventListener('touchmove', e=>{
        if(!down) return;
        dx = e.touches[0].clientX - sx;
      }, {passive:true});
      track.addEventListener('touchend', ()=>{
        down=false;
        if(Math.abs(dx)>40){
          if(dx<0) next.click(); else prev.click();
        }
        schedule();
      }, {passive:true});

      // Load ads then start carousel
      loadApprovedAds().then(() => {
        slide(0); 
        schedule();
      });
    })();
  </script>

  </style>
</head>
<body>



  <header id="top" class="px-4 py-4">
    <div class="max-w-6xl mx-auto flex items-end justify-between gap-3">
      <div class="flex items-center gap-3">
        <img src="assets/images/logo_8bfr.svg"
             alt="8BFR logo"
             class="h-10 w-auto"
             onerror="this.onerror=null;this.src='assets/images/8bfr.png'">
        <div>
          <h1 class="text-2xl sm:text-3xl font-extrabold">
            8BFR <span class="text-[#00d9ff]">Music</span> Network
          </h1>
          <!-- tiny version tag so we know this build is live -->
          <p class="text-[10px] text-green-300/90 font-mono">HOME v11</p>
          <p class="text-xs sm:text-sm text-purple-300/80 -mt-1">
            Create â€¢ Connect â€¢ Collab
          </p>
        </div>
      </div>
      <a href="contact.html"
         class="text-[#00d9ff] underline/50 hover:underline"
         style="position:relative;z-index:6">
        Contact
      </a>
    </div>
  </header>

  <!-- founder / online strip -->
  <div id="founder-strip" class="px-4 mt-2">
    <div
      class="max-w-6xl mx-auto flex flex-wrap items-center gap-3 text-[11px] sm:text-xs text-purple-100/90"
      style="position:relative; z-index:4;"
    >
      <div class="inline-flex items-center gap-2">
        <span class="px-2 py-1 rounded-full bg-purple-900/70 border border-purple-400/60 text-[10px] uppercase tracking-wide">
          Founder
        </span>
        <span>ğŸ« 1000 founder slots left</span>
      </div>
      <div class="flex items-center gap-1 text-green-300/90">
        <span class="inline-block w-2 h-2 rounded-full bg-green-400 animate-pulse"></span>
        <span>Online</span>
      </div>
    </div>
  </div>

  <!-- top marquee -->
  <div id="ads-info" class="marquee">
    <span>ğŸ® Tournaments â€¢ ğŸµ Studio & AI Tools â€¢ âœï¸ Author AI â€¢ ğŸ”„ Stream Mirroring â€¢ ğŸ›’ Seller Tools â€¢ ğŸ¤– Carrie AI â€¢ ğŸ” Explore everything.</span>
  </div>

  <!-- hero -->
  <section class="max-w-6xl mx-auto px-4 mt-5">
    <div class="hero">
      <div id="heroText">
        <h2 id="line" class="text-2xl sm:text-3xl font-extrabold">
          Welcome to 8BFR Music Network
        </h2>
      </div>
    </div>
  </section>

  <!-- featured ads -->
  <section class="max-w-6xl mx-auto px-4 mt-6">
    <h3 class="text-xl font-bold mb-2">Featured Ads</h3>
    <div class="ad-frame">
      <div id="adTrack" class="ad-track"></div>
      <button id="adPrev" aria-label="Previous" class="ad-btn">â€¹</button>
      <button id="adNext" aria-label="Next" class="ad-btn">â€º</button>
      <button id="adPause"
              class="ad-btn"
              style="top:auto;bottom:10px;left:10px;right:auto">
        Pause
      </button>
    </div>
    <div class="mt-3 flex items-center gap-2 flex-wrap">
      <!-- â¬‡ï¸ Now go to full page content on ads.html -->
      <a href="ads.html#buy" class="btn btn-primary">Buy an Ad</a>
      <a href="ads.html#how" class="btn">How ads work</a>
    </div>
  </section>

  <!-- Spotify / 8BFR -->
  <section id="killa-bees" class="max-w-6xl mx-auto px-4 mt-6 section-card p-5">
    <h3 class="text-xl font-bold mb-2">ğŸµ Featured: 8BFR on Spotify</h3>
    <div class="w-full max-w-3xl">
      <iframe style="border-radius:12px"
        src="https://open.spotify.com/embed/artist/127tw52iDXr7BvgB0IGG2x?utm_source=generator&theme=0"
        width="100%" height="152" frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        loading="lazy"></iframe>
    </div>
    <div class="mt-3 flex gap-2 flex-wrap">
      <a href="https://open.spotify.com/artist/127tw52iDXr7BvgB0IGG2x"
         target="_blank" rel="noopener"
         class="btn btn-primary">
        Listen on Spotify
      </a>
      <a href="profile_artist.html" class="btn">View 8BFR Profile</a>
    </div>
  </section>

  <!-- Featured Artists -->
  <section class="max-w-6xl mx-auto px-4 mt-6 section-card p-5">
    <div class="flex items-center justify-between mb-4">
      <div class="flex items-center gap-3">
        <h3 class="text-xl font-bold">ğŸŒŸ Featured Artists</h3>
        <button class="admin-edit-btn" onclick="manageFeaturedArtists()">
          âš™ï¸ Manage
        </button>
      </div>
      <a href="featured_songs.html#artists" class="text-sm text-purple-400 hover:text-purple-300 hover:underline">
        More â†’
      </a>
    </div>
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      <a href="profile_artist.html"
         class="block rounded-lg border border-purple-400/30 bg-black/30 p-4 hover:bg-black/40">
        <img src="assets/images/default_user_32_40.png"
             class="w-full h-40 object-cover rounded-md mb-2"
             alt="8BFR">
        <div class="font-semibold">8BFR</div>
        <div class="text-sm text-purple-300/80">Hip-hop â€¢ Producer</div>
      </a>

      <a href="profile_author.html"
         class="block rounded-lg border border-purple-400/30 bg-black/30 p-4 hover:bg-black/40">
        <img src="assets/images/default_user_35_40_girl.png"
             class="w-full h-40 object-cover rounded-md mb-2"
             alt="Nova Rae">
        <div class="font-semibold">Nova Rae</div>
        <div class="text-sm text-purple-300/80">R&B â€¢ Soul</div>
      </a>

      <a href="profile_beatmaker.html"
         class="block rounded-lg border border-purple-400/30 bg-black/30 p-4 hover:bg-black/40">
        <img src="assets/images/default_user_41_%2B.png"
             onerror="this.onerror=null;this.src='assets/images/default_user_32_40.png'"
             class="w-full h-40 object-cover rounded-md mb-2"
             alt="K. Drip">
        <div class="font-semibold">K. Drip</div>
        <div class="text-sm text-purple-300/80">Trap â€¢ Beats</div>
      </a>
    </div>
    
    <!-- Bottom More Link -->
    <div class="text-center mt-4 pt-4 border-t border-purple-500/20">
      <a href="featured_songs.html#artists" class="text-sm text-purple-400 hover:text-purple-300 hover:underline inline-flex items-center gap-1">
        View All Featured Artists â†’
      </a>
    </div>
  </section>

  <!-- Featured Songs -->
  <section class="max-w-6xl mx-auto px-4 mt-6 section-card p-5">
    <div class="flex items-center justify-between mb-4">
      <div class="flex items-center gap-3">
        <h3 class="text-xl font-bold">ğŸ”¥ Featured Songs</h3>
        <button class="admin-edit-btn" onclick="manageFeaturedSongs()">
          âš™ï¸ Manage
        </button>
      </div>
      <a href="featured_songs.html#songs" class="text-sm text-purple-400 hover:text-purple-300 hover:underline">
        More â†’
      </a>
    </div>
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      <a href="song-killa-bees.html"
         class="block rounded-lg border border-purple-400/30 bg-black/30 p-4 hover:bg-black/40">
        <img src="assets/images/default_post.jpg"
             class="w-full h-40 object-cover rounded-md mb-2"
             alt="Killa Bees">
        <div class="font-semibold">Killa Bees</div>
        <div class="text-sm text-purple-300/80">8BFR â€¢ 3:33</div>
      </a>

      <a href="song.html"
         class="block rounded-lg border border-purple-400/30 bg-black/30 p-4 hover:bg-black/40">
        <img src="assets/images/default_post.jpg"
             class="w-full h-40 object-cover rounded-md mb-2"
             alt="Dream State">
        <div class="font-semibold">Dream State</div>
        <div class="text-sm text-purple-300/80">Nova Rae â€¢ 2:58</div>
      </a>

      <a href="song.html"
         class="block rounded-lg border border-purple-400/30 bg-black/30 p-4 hover:bg-black/40">
        <img src="assets/images/default_post.jpg"
             class="w-full h-40 object-cover rounded-md mb-2"
             alt="Vapor Loop">
        <div class="font-semibold">Vapor Loop</div>
        <div class="text-sm text-purple-300/80">K. Drip â€¢ 4:01</div>
      </a>
    </div>
    
    <!-- Bottom More Link -->
    <div class="text-center mt-4 pt-4 border-t border-purple-500/20">
      <a href="featured_songs.html#songs" class="text-sm text-purple-400 hover:text-purple-300 hover:underline inline-flex items-center gap-1">
        View All Featured Songs â†’
      </a>
    </div>
  </section>

  <!-- Feed preview with 2 sample posts -->
  <section class="max-w-6xl mx-auto px-4 mt-6 section-card p-5">
    <div class="flex items-center justify-between mb-3">
      <div class="flex items-center gap-3">
        <h3 class="text-xl font-bold">ğŸ—¨ï¸ Community Feed</h3>
        <button class="admin-edit-btn" onclick="manageFeedPosts()">
          âš™ï¸ Manage
        </button>
      </div>
    </div>
    <p class="mb-3 text-purple-200/80">See what other creators are posting.</p>
    
    <!-- Feed Preview Posts -->
    <div class="space-y-3 mb-4">
      <!-- Post 1 -->
      <div style="background: rgba(15, 0, 30, 0.6); border: 1px solid rgba(124, 58, 237, 0.3); border-radius: 12px; padding: 1rem;">
        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem;">
          <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #7c3aed, #a855f7); display: flex; align-items: center; justify-content: center; font-size: 1.1rem;">ğŸ§</div>
          <div>
            <div style="font-weight: 700; font-size: 0.95rem; display: flex; align-items: center; gap: 0.4rem;">
              BeatMaster808 <span style="color: #00d9ff;">âœ“</span>
            </div>
            <div style="font-size: 0.8rem; color: #a855f7; opacity: 0.7;">3h ago</div>
          </div>
        </div>
        <div style="margin-bottom: 0.5rem; line-height: 1.5;">Just dropped a new beat! ğŸ”¥ What y'all think?</div>
        <div style="display: flex; gap: 1rem; padding-top: 0.5rem; border-top: 1px solid rgba(124, 58, 237, 0.2); font-size: 0.85rem; color: #a855f7;">
          <span>ğŸ¤ 245</span>
          <span>ğŸ’¬ 32</span>
          <span>ğŸ” 15</span>
        </div>
      </div>
      
      <!-- Post 2 -->
      <div style="background: rgba(15, 0, 30, 0.6); border: 1px solid rgba(124, 58, 237, 0.3); border-radius: 12px; padding: 1rem;">
        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem;">
          <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #7c3aed, #a855f7); display: flex; align-items: center; justify-content: center; font-size: 1.1rem;">ğŸ¤</div>
          <div>
            <div style="font-weight: 700; font-size: 0.95rem; display: flex; align-items: center; gap: 0.4rem;">
              VocalQueen <span style="color: #00d9ff;">âœ“</span>
            </div>
            <div style="font-size: 0.8rem; color: #a855f7; opacity: 0.7;">5h ago</div>
          </div>
        </div>
        <div style="margin-bottom: 0.5rem; line-height: 1.5;">Recording session vibes âœ¨</div>
        <div style="display: flex; gap: 1rem; padding-top: 0.5rem; border-top: 1px solid rgba(124, 58, 237, 0.2); font-size: 0.85rem; color: #a855f7;">
          <span>ğŸ¤ 188</span>
          <span>ğŸ’¬ 21</span>
          <span>ğŸ” 8</span>
        </div>
      </div>
    </div>
    
    <a href="feed.html" class="btn btn-primary">View Full Feed</a>
  </section>

  <!-- Radio preview -->
  <section class="max-w-6xl mx-auto px-4 mt-6 section-card p-5">
    <div class="flex items-center justify-between mb-3">
      <div class="flex items-center gap-3">
        <h3 class="text-xl font-bold">ğŸ“» 8BFR Radio</h3>
        <button class="admin-edit-btn" onclick="manageRadioTracks()">
          âš™ï¸ Manage
        </button>
      </div>
      <div class="flex items-center gap-2">
        <span class="inline-block w-2 h-2 rounded-full bg-red-500 animate-pulse"></span>
        <span class="text-xs text-red-400 font-semibold">LIVE</span>
      </div>
    </div>
    
    <!-- Stats Bar -->
    <div class="flex gap-4 mb-4 text-sm">
      <div class="flex items-center gap-2">
        <span class="text-purple-400">ğŸµ</span>
        <span class="text-purple-200/80"><span id="homeRadioTracks" class="font-bold text-purple-300">0</span> Tracks</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="text-purple-400">ğŸ¤</span>
        <span class="text-purple-200/80"><span id="homeRadioArtists" class="font-bold text-purple-300">0</span> Artists</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="text-purple-400">â–¶ï¸</span>
        <span class="text-purple-200/80"><span id="homeRadioPlays" class="font-bold text-purple-300">0</span> Plays</span>
      </div>
    </div>
    
    <!-- Now Playing -->
    <div id="homeNowPlaying" style="background: rgba(124, 58, 237, 0.15); border: 1px solid rgba(124, 58, 237, 0.3); border-radius: 12px; padding: 1rem; margin-bottom: 1rem; display: none;">
      <div style="display: flex; align-items: center; gap: 1rem;">
        <div style="width: 50px; height: 50px; border-radius: 8px; background: linear-gradient(135deg, #7c3aed, #a855f7); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; flex-shrink: 0;">
          <span id="homeNowPlayingEmoji">ğŸµ</span>
        </div>
        <div style="flex: 1; min-width: 0;">
          <div style="font-size: 0.7rem; color: #a855f7; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.25rem;">
            â–¶ï¸ Now Playing
          </div>
          <div style="font-weight: 700; font-size: 1rem; margin-bottom: 0.25rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" id="homeNowPlayingTitle">
            Loading...
          </div>
          <div style="font-size: 0.85rem; color: #a855f7; display: flex; align-items: center; gap: 0.5rem;">
            <span id="homeNowPlayingArtist">Artist Name</span>
            <span style="color: #00d9ff;">âœ“</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Track List Preview -->
    <div id="homeRadioTracks" style="margin-bottom: 1rem;">
      <div style="font-size: 0.85rem; color: #a855f7; margin-bottom: 0.75rem; font-weight: 600;">
        ğŸ¶ Featured Tracks:
      </div>
      <div id="homeTrackList" style="display: flex; flex-direction: column; gap: 0.5rem;">
        <!-- Tracks populated by JS -->
      </div>
    </div>
    
    <div class="flex gap-2 flex-wrap">
      <a href="radio.html" class="btn btn-primary">ğŸ§ Listen Now</a>
      <div style="font-size: 0.8rem; color: #a855f7; opacity: 0.8; padding: 0.55rem 0;">
        Non-stop music from verified artists
      </div>
    </div>
  </section>

  <script>
    // Radio preview for homepage
    (function(){
      // Initialize mock radio data if empty (for demo)
      function initMockRadioData() {
        const hasArtistProfiles = Array.from({length: localStorage.length}, (_, i) => localStorage.key(i))
          .some(key => key.startsWith('profile_') && !key.includes('settings'));
        
        if (hasArtistProfiles) return; // Real data exists
        
        // Create mock artist profiles for demo
        const mockArtists = [
          {
            id: 'demo_artist_1',
            name: '8BFR',
            emoji: 'ğŸ¤',
            badges: ['artist', 'verified', 'founder'],
            verified: true,
            verification: {
              type: 'artist',
              link: 'https://open.spotify.com/artist/127tw52iDXr7BvgB0IGG2x',
              status: 'approved'
            },
            tracks: [
              { title: 'Killa Bees', url: 'https://open.spotify.com/track/2x1sJyFdgcRDh9zlGSqNsa?si=ruJ0reA1SaWOBMmD1B8b4w' },
              { title: 'Purple Dreams', url: 'https://open.spotify.com/track/demo2' }
            ]
          },
          {
            id: 'demo_artist_2',
            name: 'Nova Rae',
            emoji: 'ğŸ¤',
            badges: ['artist', 'verified'],
            verified: true,
            verification: {
              type: 'artist',
              link: 'https://music.apple.com/artist/novarae',
              status: 'approved'
            },
            tracks: [
              { title: 'Dream State', url: 'https://open.spotify.com/track/demo3' },
              { title: 'Midnight Vibes', url: 'https://open.spotify.com/track/demo4' }
            ]
          },
          {
            id: 'demo_beatmaker_1',
            name: 'K. Drip',
            emoji: 'ğŸšï¸',
            badges: ['beatmaker', 'verified'],
            verified: true,
            verification: {
              type: 'beatmaker',
              link: 'https://soundcloud.com/kdrip',
              status: 'approved'
            },
            tracks: [
              { title: 'Vapor Loop', url: 'https://open.spotify.com/track/demo5' },
              { title: 'Neon Nights', url: 'https://open.spotify.com/track/demo6' }
            ]
          }
        ];
        
        mockArtists.forEach(artist => {
          try {
            localStorage.setItem(`profile_${artist.id}`, JSON.stringify(artist));
          } catch(e) {}
        });
        
        // Set initial play count for demo
        if (!localStorage.getItem('radio_plays')) {
          localStorage.setItem('radio_plays', '1247');
        }
      }
      
      function collectRadioTracks() {
        const tracks = [];
        const artists = new Set();
        
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (!key.startsWith('profile_')) continue;
          
          try {
            const profile = JSON.parse(localStorage.getItem(key) || '{}');
            
            // Check for artist OR beatmaker badge
            const hasCreatorBadge = 
              profile.badges && (
                profile.badges.includes('artist') || 
                profile.badges.includes('beatmaker')
              );
            
            // Check verified status
            const isVerified = profile.verified === true;
            
            // Must have both to show in radio
            if (!hasCreatorBadge || !isVerified) continue;
            
            // Determine badge emoji
            let badgeEmoji = 'ğŸµ';
            if (profile.badges.includes('artist')) badgeEmoji = 'ğŸ¤';
            else if (profile.badges.includes('beatmaker')) badgeEmoji = 'ğŸšï¸';
            
            const profileTracks = profile.tracks || [];
            profileTracks.forEach(track => {
              if (!track.url) return;
              tracks.push({
                title: track.title || 'Untitled Track',
                artist: profile.name || 'Unknown Artist',
                emoji: badgeEmoji,
                verified: isVerified
              });
              artists.add(profile.name || 'Unknown Artist');
            });
          } catch(e) {}
        }
        
        return { tracks, artistCount: artists.size };
      }
      
      // Initialize mock data for demo
      initMockRadioData();
      
      // Get data
      const { tracks, artistCount } = collectRadioTracks();
      const totalPlays = parseInt(localStorage.getItem('radio_plays') || '0');
      
      // Update stats
      const trackCountEl = document.getElementById('homeRadioTracks');
      const artistCountEl = document.getElementById('homeRadioArtists');
      const playsEl = document.getElementById('homeRadioPlays');
      
      if (trackCountEl) trackCountEl.textContent = tracks.length;
      if (artistCountEl) artistCountEl.textContent = artistCount;
      if (playsEl) playsEl.textContent = totalPlays.toLocaleString();
      
      // Show now playing (simulate)
      if (tracks.length > 0) {
        const nowPlayingSection = document.getElementById('homeNowPlaying');
        const currentTrack = tracks[Math.floor(Math.random() * tracks.length)];
        
        if (nowPlayingSection) {
          document.getElementById('homeNowPlayingEmoji').textContent = currentTrack.emoji;
          document.getElementById('homeNowPlayingTitle').textContent = currentTrack.title;
          document.getElementById('homeNowPlayingArtist').textContent = currentTrack.artist;
          nowPlayingSection.style.display = 'block';
        }
      }
      
      // Show track list (5 random tracks)
      const trackListEl = document.getElementById('homeTrackList');
      if (trackListEl) {
        if (tracks.length === 0) {
          trackListEl.innerHTML = `
            <div style="text-align: center; padding: 2rem 1rem; color: #a855f7; opacity: 0.7;">
              <div style="font-size: 3rem; margin-bottom: 0.5rem;">ğŸ“»</div>
              <div style="font-size: 0.9rem; margin-bottom: 0.25rem;">No tracks available yet</div>
              <div style="font-size: 0.8rem;">Artists with verified badges can upload tracks!</div>
            </div>
          `;
        } else {
          // Show up to 5 random tracks
          const displayTracks = tracks
            .sort(() => Math.random() - 0.5)
            .slice(0, 5);
          
          trackListEl.innerHTML = displayTracks.map(track => `
            <div style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem; background: rgba(124, 58, 237, 0.05); border-radius: 8px; border: 1px solid rgba(124, 58, 237, 0.2); transition: all 0.2s; cursor: pointer;" onmouseover="this.style.background='rgba(124, 58, 237, 0.15)'; this.style.borderColor='rgba(124, 58, 237, 0.4)';" onmouseout="this.style.background='rgba(124, 58, 237, 0.05)'; this.style.borderColor='rgba(124, 58, 237, 0.2)';">
              <div style="width: 35px; height: 35px; border-radius: 6px; background: linear-gradient(135deg, #7c3aed, #a855f7); display: flex; align-items: center; justify-content: center; font-size: 1.1rem; flex-shrink: 0;">
                ${track.emoji}
              </div>
              <div style="flex: 1; min-width: 0;">
                <div style="font-weight: 600; font-size: 0.9rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                  ${track.title}
                </div>
                <div style="font-size: 0.75rem; color: #a855f7; display: flex; align-items: center; gap: 0.3rem;">
                  <span>${track.artist}</span>
                  ${track.verified ? '<span style="color: #00d9ff;">âœ“</span>' : ''}
                </div>
              </div>
              <div style="color: #a855f7; font-size: 0.9rem; opacity: 0.6;">
                ğŸµ
              </div>
            </div>
          `).join('');
        }
      }
    })();
  </script>

  <!-- Donate -->
  <section id="donate" class="max-w-6xl mx-auto px-4 mt-6 section-card p-5">
    <h3 class="text-xl font-bold mb-2">ğŸ’œ Support 8BFR</h3>
    <p class="text-sm opacity-85 mb-4">
      Help us empower creators and keep the lights neon.
    </p>
    <a class="btn btn-primary"
       href="https://www.paypal.com/donate?business=8bfr.music@gmail.com"
       target="_blank" rel="noopener">
      Donate via PayPal
    </a>
  </section>

  <!-- bottom marquee that links back up -->
  <div class="marquee">
    <a href="#ads-info" style="text-decoration:none">
      <span>ğŸ’ Promote your drop â€¢ Support creators â€¢ Ads always rotating â€” tap to learn more ğŸ’</span>
    </a>
  </div>

  <!-- footer has id so the bottom bubble can scroll here -->
  <footer id="page-footer" class="mt-10 border-t border-purple-400/30 bg-black/30">
    <div class="max-w-6xl mx-auto px-4 py-8 grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <div>
        <div class="font-bold mb-2">8BFR</div>
        <a class="block opacity-85 hover:underline" href="index.html">Home</a>
        <a class="block opacity-85 hover:underline" href="about.html">About</a>
        <a class="block opacity-85 hover:underline" href="contact.html">Contact</a>
      </div>
      <div>
        <div class="font-bold mb-2">Studio & AI</div>
        <a class="block opacity-85 hover:underline" href="studio-tools.html">All Tools</a>
        <a class="block opacity-85 hover:underline" href="lyrics-ai.html">AI Lyrics</a>
        <a class="block opacity-85 hover:underline" href="song-ai.html">AI Song</a>
        <a class="block opacity-85 hover:underline" href="album-ai.html">AI Album</a>
        <a class="block opacity-85 hover:underline" href="voice-ai.html">Voice / Post VO</a>
      </div>
      <div>
        <div class="font-bold mb-2">Community</div>
        <a class="block opacity-85 hover:underline" href="feed.html">Feed</a>
        <a class="block opacity-85 hover:underline" href="profiles.html">Profiles</a>
        <a class="block opacity-85 hover:underline" href="featured.html">Featured</a>
        <a class="block opacity-85 hover:underline" href="radio.html">Radio</a>
        <a class="block opacity-85 hover:underline" href="podcast.html">Podcast</a>
      </div>
      <div>
        <div class="font-bold mb-2">Legal</div>
        <a class="block opacity-85 hover:underline" href="privacy.html">Privacy</a>
        <a class="block opacity-85 hover:underline" href="terms.html">Terms</a>
        <a class="block opacity-85 hover:underline" href="credits.html">Credits</a>
      </div>
    </div>
    <div class="max-w-6xl mx-auto px-4 pb-6 text-center text-xs text-purple-300/80">
      Â© 2025 8BFR Music Network â€” "Empowering creators, connecting the world â€” 8BFR Music Network."
    </div>
  </footer>

  <!-- global Carrie/menu/etc -->
  <script src="scripts.js?v=1ed5604" defer></script>

  <!-- Bottom Navigation Bar -->
  <nav id="bottomNav" class="fixed bottom-0 left-0 right-0 z-50 bg-[rgba(15,0,30,0.95)] backdrop-blur-md border-t border-purple-500/40">
    <div class="max-w-6xl mx-auto px-2 py-2">
      <div class="flex items-center justify-around gap-1">
        <a href="index.html" class="bottom-nav-item active">
          <div class="bottom-nav-icon">ğŸ </div>
          <div class="bottom-nav-label">Home</div>
        </a>
        <a href="search.html" class="bottom-nav-item">
          <div class="bottom-nav-icon">ğŸ”</div>
          <div class="bottom-nav-label">Search</div>
        </a>
        <a href="feed.html" class="bottom-nav-item">
          <div class="bottom-nav-icon">ğŸ“°</div>
          <div class="bottom-nav-label">Feed</div>
        </a>
        <a href="radio.html" class="bottom-nav-item">
          <div class="bottom-nav-icon">ğŸ“»</div>
          <div class="bottom-nav-label">Radio</div>
        </a>
        <a href="shop.html" class="bottom-nav-item">
          <div class="bottom-nav-icon">ğŸ›’</div>
          <div class="bottom-nav-label">Shop</div>
        </a>
      </div>
    </div>
  </nav>

  <style>
    /* Bottom Navigation Styles */
    .bottom-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;
      padding: 0.5rem 0.75rem;
      text-decoration: none;
      color: #a855f7;
      transition: all 0.2s;
      border-radius: 0.5rem;
      flex: 1;
      max-width: 100px;
    }
    .bottom-nav-item:hover {
      background: rgba(124, 58, 237, 0.2);
      color: #c084fc;
    }
    .bottom-nav-item.active {
      color: #fff;
      background: rgba(124, 58, 237, 0.3);
    }
    .bottom-nav-icon {
      font-size: 1.25rem;
      line-height: 1;
    }
    .bottom-nav-label {
      font-size: 0.7rem;
      font-weight: 600;
      text-align: center;
    }
    /* Add padding to body so content doesn't get hidden behind nav */
    body {
      padding-bottom: 70px;
    }
  </style>

  <!-- page-specific scripts: hero text + ad carousel -->
  <script>
    // hero (kept simple)
    (function(){
      const line = document.getElementById('line');
      if (!line) return;
    })();

    // featured ads carousel (index only)
    (function(){
      const track = document.getElementById('adTrack');
      const prev  = document.getElementById('adPrev');
      const next  = document.getElementById('adNext');
      const pause = document.getElementById('adPause');
      if (!track || !prev || !next || !pause) return;

      const ads = [
        { img:'assets/images/ad_banner_1.jpg', url:'ads.html#ad1' },
        { img:'assets/images/ad_banner_2.jpg', url:'ads.html#ad2' },
        { img:'assets/images/ad_banner_3.jpg', url:'ads.html#ad3' },
        { img:'assets/images/ad_banner_4.jpg', url:'ads.html#ad4' },
        { img:'assets/images/ad_banner_5.jpg', url:'ads.html#ad5' }
      ];

      let i=0, paused=false, t=null;

      function slide(idx){
        i = (idx+ads.length) % ads.length;
        const old = track.querySelector('.ad-slide.show');
        const a = document.createElement('a');
        a.className = 'ad-slide';
        a.href = ads[i].url || '#';
        a.target = '_blank';
        a.rel = 'noopener';

        const img = new Image();
        img.src = ads[i].img;
        img.alt = 'Ad slot ' + (i+1);
        a.appendChild(img);
        track.appendChild(a);

        requestAnimationFrame(()=>a.classList.add('show'));
        if (old){ setTimeout(()=>old.remove(),380); }
      }

      function auto(){ if(paused) return; slide(i+1); schedule(); }
      function schedule(){ clearTimeout(t); t = setTimeout(auto, 5000); }

      prev.onclick = () => { if(!paused){ paused=true; pause.textContent='Play'; } slide(i-1); };
      next.onclick = () => { if(!paused){ paused=true; pause.textContent='Play'; } slide(i+1); };
      pause.onclick = () => {
        paused = !paused;
        pause.textContent = paused ? 'Play' : 'Pause';
        if (!paused) schedule(); else clearTimeout(t);
      };

      // swipe on touch
      let sx=0, dx=0, down=false;
      track.addEventListener('touchstart', e=>{
        down=true;
        sx=e.touches[0].clientX;
        dx=0;
        clearTimeout(t);
      }, {passive:true});
      track.addEventListener('touchmove', e=>{
        if(!down) return;
        dx = e.touches[0].clientX - sx;
      }, {passive:true});
      track.addEventListener('touchend', ()=>{
        down=false;
        if(Math.abs(dx)>40){
          if(dx<0) next.click(); else prev.click();
        }
        schedule();
      }, {passive:true});

      slide(0); schedule();
    })();
  </script>
<!-- Avatar switcher logic (HOME only) -->
  <script>
    window.addEventListener("load", function () {
      const switcher = document.getElementById("homeAvatarSwitcher");
      if (!switcher) return;

      const buttons = switcher.querySelectorAll("[data-avatar-choice]");

      function setActiveButton(key) {
        buttons.forEach((btn) => {
          const isActive = btn.getAttribute("data-avatar-choice") === key;
          btn.style.backgroundColor = isActive
            ? "rgba(76,29,149,0.9)"
            : "transparent";
          btn.style.color = isActive ? "#e5e7eb" : "#c4b5fd";
          btn.style.borderColor = isActive
            ? "rgba(168,85,247,0.9)"
            : "transparent";
        });
      }

      function saveAvatarChoice(key) {
        // Save choice for Carrie system
        try {
          localStorage.setItem("carrie_avatar", key);
        } catch (e) {}

        // Let other pages/widgets (like chat) react to the change
        try {
          window.dispatchEvent(
            new StorageEvent("storage", {
              key: "carrie_avatar",
              newValue: key,
            })
          );
        } catch (e) {}

        setActiveButton(key);
      }

      // Load saved avatar on page load
      let current = "carrie";
      try {
        const stored = localStorage.getItem("carrie_avatar");
        if (stored === "james" || stored === "azreen" || stored === "carrie") {
          current = stored;
        }
      } catch (e) {}
      setActiveButton(current);

      // Wire up clicks
      buttons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const key = btn.getAttribute("data-avatar-choice");
          if (!key) return;
          saveAvatarChoice(key);
        });
      });

      // ğŸ”‡ Hide old Carrie/James-only switcher bar from scripts.js (the one above the avatar)
      try {
        // find any other bar that has Carrie + James buttons but NO Azreen
        const candidateBars = new Set();

        document.querySelectorAll("button").forEach((btn) => {
          if (switcher.contains(btn)) return; // skip our new bottom-left switcher

          const label = (btn.textContent || "").trim().toLowerCase();
          if (!label.includes("carrie") && !label.includes("james")) return;

          const bar = btn.closest("div,nav,section,header,footer");
          if (bar) candidateBars.add(bar);
        });

        candidateBars.forEach((bar) => {
          const names = Array.from(bar.querySelectorAll("button")).map((b) =>
            (b.textContent || "").trim().toLowerCase()
          );

          const hasCarrie = names.some((t) => t.includes("carrie"));
          const hasJames = names.some((t) => t.includes("james"));
          const hasAzreen = names.some((t) => t.includes("azreen"));

          // Old switcher = Carrie + James, NO Azreen
          if (hasCarrie && hasJames && !hasAzreen) {
            bar.style.display = "none";
          }
        });
      } catch (e) {}
    });
  </script>
    <!-- Home avatar switcher (Carrie / James / Azreen) - bottom-left -->
  <div id="homeAvatarSwitcher"
       class="fixed bottom-4 left-4 z-40 flex items-center gap-2 bg-black/60 border border-purple-500/70 rounded-full px-2 py-1">
    <span class="text-[11px] text-purple-200/80 hidden sm:inline">
      Avatar:
    </span>
    <button
      type="button"
      class="px-2 py-0.5 text-[11px] rounded-full border border-transparent"
      data-avatar-choice="carrie">
      Carrie
    </button>
    <button
      type="button"
      class="px-2 py-0.5 text-[11px] rounded-full border border-transparent"
      data-avatar-choice="james">
      James
    </button>
    <button
      type="button"
      class="px-2 py-0.5 text-[11px] rounded-full border border-transparent"
      data-avatar-choice="azreen">
      Azreen
    </button>
  </div>
  
  <!-- Admin Management Functions (Placeholder - Wire up functionality tomorrow) -->
  <script>
    function manageFeaturedArtists() {
      alert('Featured Artists Management\n\nWire up functionality here:\n- Add/remove featured artists\n- Reorder artists\n- Edit artist info');
      // TODO: Open management modal or redirect to admin page
    }
    
    function manageFeaturedSongs() {
      alert('Featured Songs Management\n\nWire up functionality here:\n- Add/remove featured songs\n- Reorder songs\n- Edit song info');
      // TODO: Open management modal or redirect to admin page
    }
    
    function manageFeedPosts() {
      alert('Feed Posts Management\n\nWire up functionality here:\n- Add/remove preview posts\n- Edit post content\n- Moderate posts');
      // TODO: Open management modal or redirect to admin page
    }
    
    function manageRadioTracks() {
      alert('Radio Tracks Management\n\nWire up functionality here:\n- Add/remove tracks\n- Feature/unfeature tracks\n- Edit track info');
      // TODO: Open management modal or redirect to admin page
    }
  </script>
  
</body>
        </html>
