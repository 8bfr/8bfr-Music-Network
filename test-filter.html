<!DOCTYPE html>
<html>
<head>
  <title>Test Filter</title>
  <script src="carrie-closet-data.js?v=3"></script>
</head>
<body>
  <h1>Testing Filter Function</h1>
  <div id="result"></div>
  
  <script>
    setTimeout(function() {
      const result = document.getElementById('result');
      
      if (!window.CARRIE_CLOSET_ITEMS) {
        result.innerHTML = '<p style="color:red">Data not loaded!</p>';
        return;
      }
      
      // Test the exact same filter logic
      let currentGender = "female";
      let currentCat = "hair";
      
      const filtered = window.CARRIE_CLOSET_ITEMS.filter(it => {
        const gOK = it.gender === "unisex" || it.gender === currentGender;
        if (!gOK) return false;
        if (currentCat === "all") return true;
        return it.category === currentCat || it.cat === currentCat;
      });
      
      let html = '<h2>Filter Test Results:</h2>';
      html += '<p>Total items: ' + window.CARRIE_CLOSET_ITEMS.length + '</p>';
      html += '<p>Gender filter: ' + currentGender + '</p>';
      html += '<p>Category filter: ' + currentCat + '</p>';
      html += '<p><b>Filtered items: ' + filtered.length + '</b></p>';
      
      if (filtered.length > 0) {
        html += '<h3>Items found:</h3><ul>';
        filtered.forEach(item => {
          html += '<li>' + item.name + '</li>';
        });
        html += '</ul>';
      } else {
        html += '<p style="color:red;font-weight:bold;">NO ITEMS MATCHED THE FILTER!</p>';
      }
      
      result.innerHTML = html;
    }, 100);
  </script>
</body>
</html>
