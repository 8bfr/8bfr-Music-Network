
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Profile - 8BFR Music Network</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Work+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --primary: #ff0066;
            --secondary: #00ccff;
            --dark: #0a0a0a;
            --dark-card: #1a1a1a;
            --success: #00ff88;
            --text: #ffffff;
            --border: #333333;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Work Sans', sans-serif; background: var(--dark); color: var(--text); line-height: 1.6; }
        .header { background: linear-gradient(135deg, var(--dark-card), #000); border-bottom: 2px solid var(--primary); padding: 1.5rem 2rem; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { font-family: 'Bebas Neue', cursive; font-size: 2rem; background: linear-gradient(90deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .container { max-width: 800px; margin: 2rem auto; padding: 0 2rem; }
        .card { background: var(--dark-card); border: 1px solid var(--border); border-radius: 8px; padding: 2rem; margin-bottom: 1.5rem; }
        .card h2 { color: var(--secondary); margin-bottom: 1.5rem; font-family: 'Bebas Neue', cursive; }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 0.75rem; background: var(--dark); border: 1px solid var(--border); border-radius: 4px; color: var(--text); font-family: 'Work Sans', sans-serif; }
        .checkbox-group { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; padding: 0.5rem; border-radius: 4px; }
        .checkbox-group:hover { background: rgba(255, 255, 255, 0.02); }
        .checkbox-group input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; }
        .checkbox-group label { cursor: pointer; margin: 0; font-weight: normal; }
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; }
        .btn { background: var(--primary); color: white; border: none; padding: 0.75rem 2rem; border-radius: 4px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; text-decoration: none; display: inline-block; margin-right: 0.5rem; }
        .btn:hover { background: #cc0052; transform: translateY(-2px); }
        .btn-secondary { background: var(--secondary); }
        .btn-secondary:hover { background: #00a8cc; }
        .btn-success { background: var(--success); }
        .btn-success:hover { background: #00cc6e; }
    </style>
</head>
<body>
    <div class="header">
        <h1>â• CREATE PROFILE</h1>
        <a href="owner-panel.html" class="btn btn-secondary">ğŸ  Back to Panel</a>
    </div>
    <div class="container">
        <div class="card">
            <h2>Account Information</h2>
            <div class="form-group">
                <label>Email: *</label>
                <input type="email" id="newEmail" required>
            </div>
            <div class="form-group">
                <label>Password: *</label>
                <input type="password" id="newPassword" required>
            </div>
            <div class="form-group">
                <label>Username: *</label>
                <input type="text" id="newUsername" required>
            </div>
            <div class="form-group">
                <label>Display Name:</label>
                <input type="text" id="newDisplayName">
            </div>
            <div class="form-group">
                <label>Bio:</label>
                <textarea id="newBio" rows="3"></textarea>
            </div>
        </div>
        <div class="card">
            <h2>ğŸµ Music Creator Roles</h2>
            <div class="grid-3">
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="artist"><label>ğŸ¤ Artist</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="beatmaker"><label>ğŸšï¸ Beatmaker</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="producer"><label>ğŸ§ Producer</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="singer"><label>ğŸ™ï¸ Singer</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="musician"><label>ğŸ¸ Musician</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="engineer"><label>ğŸ›ï¸ Engineer</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="songwriter"><label>ğŸ¼ Songwriter</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="dj"><label>ğŸ“€ DJ</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="label"><label>ğŸ·ï¸ Label</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="promoter"><label>ğŸš€ Promoter</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="rapper"><label>ğŸ¤ Rapper</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="designer"><label>ğŸ¨ Designer</label></div>
            </div>
        </div>
        <div class="card">
            <h2>âœï¸ Creators & Authors</h2>
            <div class="grid-3">
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="author"><label>ğŸ“– Author</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="blogger"><label>ğŸ“° Blogger</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="game_creator"><label>ğŸ® Game Creator</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="developer"><label>ğŸ§  Developer</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="streamer"><label>ğŸ“¡ Streamer</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="gamer"><label>ğŸ® Gamer</label></div>
            </div>
        </div>
        <div class="card">
            <h2>ğŸŒ Community Roles</h2>
            <div class="grid-3">
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="influencer"><label>ğŸ’« Influencer</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="community_leader"><label>ğŸ‘¥ Community Leader</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="fan"><label>ğŸ’ Fan</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="supporter"><label>ğŸ¤ Supporter</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="mentor"><label>ğŸ§­ Mentor</label></div>
            </div>
        </div>
        <div class="card">
            <h2>ğŸ›¡ï¸ Staff & Special Roles</h2>
            <div class="grid-3">
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="owner"><label>ğŸ‘‘ Owner</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="admin"><label>âš™ï¸ Admin</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="mod"><label>ğŸ’¬ Moderator</label></div>
                <div class="checkbox-group"><input type="checkbox" class="role-check" value="g7"><label>ğŸ‘‘ G7</label></div>
            </div>
        </div>
        <div class="card">
            <h2>ğŸ’° Economy & Rewards Badges</h2>
            <div class="grid-3">
                <div class="checkbox-group"><input type="checkbox" class="badge-check" value="verified"><label>ğŸ›¡ï¸ Verified</label></div>
                <div class="checkbox-group"><input type="checkbox" class="badge-check" value="founder"><label>âš¡ Founder</label></div>
                <div class="checkbox-group"><input type="checkbox" class="badge-check" value="vip_member"><label>ğŸ–ï¸ VIP</label></div>
                <div class="checkbox-group"><input type="checkbox" class="badge-check" value="donor"><label>ğŸ’° Donor</label></div>
                <div class="checkbox-group"><input type="checkbox" class="badge-check" value="sponsor"><label>ğŸ’µ Sponsor</label></div>
                <div class="checkbox-group"><input type="checkbox" class="badge-check" value="beta_tester"><label>ğŸ§ª Beta Tester</label></div>
                <div class="checkbox-group"><input type="checkbox" class="badge-check" value="early_supporter"><label>ğŸ« Early Supporter</label></div>
                <div class="checkbox-group"><input type="checkbox" class="badge-check" value="top_creator"><label>ğŸ… Top Creator</label></div>
            </div>
            <div class="checkbox-group" style="margin-top: 1rem;">
                <input type="checkbox" id="verifiedArtist">
                <label for="verifiedArtist"><strong>ğŸ›¡ï¸ Mark as Verified Artist/Beatmaker</strong></label>
            </div>
        </div>
        <div class="card">
            <button class="btn btn-success" onclick="createNewProfile()">âœ… Create Profile</button>
            <a href="owner-panel.html" class="btn btn-secondary">Cancel</a>
        </div>
    </div>
    <script>
        const SUPABASE_URL = 'https://novbuvwpjnxwwvdekjhr.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5vdmJ1dndwam54d3d2ZGVramhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExODkxODUsImV4cCI6MjA3Njc2NTE4NX0.1UUkdGafh6ZplAX8hi7Bvj94D2gvFQZUl0an1RvcSA0';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        async function init() {
            const { data: { user } } = await supabase.auth.getUser();
            if (!user) {
                window.location.href = 'login.html';
                return;
            }
            const { data: profile } = await supabase.from('profiles').select('role').eq('user_id', user.id).single();
            if (!profile || profile.role !== 'owner') {
                alert('Access Denied: Owner only');
                window.location.href = 'index.html';
                return;
            }
        }
        async function createNewProfile() {
            const email = document.getElementById('newEmail').value;
            const password = document.getElementById('newPassword').value;
            const username = document.getElementById('newUsername').value;
            const displayName = document.getElementById('newDisplayName').value;
            const bio = document.getElementById('newBio').value;
            if (!email || !password || !username) {
                alert('Email, password, and username are required');
                return;
            }
            const selectedRoles = [];
            document.querySelectorAll('.role-check:checked').forEach(cb => selectedRoles.push(cb.value));
            const selectedBadges = [];
            document.querySelectorAll('.badge-check:checked').forEach(cb => selectedBadges.push(cb.value));
            const allTags = [...selectedRoles, ...selectedBadges];
            const primaryRole = selectedRoles[0] || 'fan';
            const verified = document.getElementById('verifiedArtist').checked;
            try {
                const { data: authData, error: authError } = await supabase.auth.signUp({
                    email: email,
                    password: password,
                    options: {
                        data: {
                            username: username,
                            display_name: displayName
                        }
                    }
                });
                if (authError) throw authError;
                await supabase.from('profiles').insert({
                    user_id: authData.user.id,
                    email: email,
                    username: username,
                    display_name: displayName,
                    bio: bio,
                    role: primaryRole,
                    tags: allTags,
                    verified_artist: verified
                });
                alert(`âœ… Profile created!\nUsername: ${username}\nRole: ${primaryRole}\nBadges: ${allTags.length}`);
                window.location.href = 'owner-panel.html';
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }
        init();
    </script>
    <!-- ADD THIS SCRIPT TO EVERY PAGE (except index.html where you want it always shown) -->
<!-- Place it right before the closing </body> tag -->

<script>
// Avatar & Bubble Toggle System
(function() {
    // Create toggle button
    const toggleBtn = document.createElement('button');
    toggleBtn.id = 'avatarToggle';
    toggleBtn.innerHTML = 'ğŸ‘ï¸';
    toggleBtn.title = 'Toggle Avatar/Bubbles';
    toggleBtn.style.cssText = `
        position: fixed;
        top: 80px;
        right: 20px;
        z-index: 9999;
        background: rgba(124, 58, 237, 0.9);
        border: 2px solid rgba(124, 58, 237, 1);
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(124, 58, 237, 0.5);
        transition: all 0.3s ease;
    `;
    
    toggleBtn.addEventListener('mouseenter', function() {
        this.style.transform = 'scale(1.1)';
    });
    
    toggleBtn.addEventListener('mouseleave', function() {
        this.style.transform = 'scale(1)';
    });
    
    document.body.appendChild(toggleBtn);
    
    // Load saved preference
    let isHidden = localStorage.getItem('hideAvatarBubbles') === 'true';
    
    function updateVisibility() {
        const elementsToToggle = [
            document.getElementById('homeAvatarSwitcher'),
            ...document.querySelectorAll('[id*="bubble"]'),
            ...document.querySelectorAll('[class*="bubble"]'),
            ...document.querySelectorAll('[id*="avatar"][id*="switcher"]')
        ];
        
        elementsToToggle.forEach(el => {
            if (el) {
                el.style.display = isHidden ? 'none' : '';
            }
        });
        
        toggleBtn.innerHTML = isHidden ? 'ğŸ‘ï¸â€ğŸ—¨ï¸' : 'ğŸ‘ï¸';
        toggleBtn.title = isHidden ? 'Show Avatar/Bubbles' : 'Hide Avatar/Bubbles';
    }
    
    toggleBtn.addEventListener('click', function() {
        isHidden = !isHidden;
        localStorage.setItem('hideAvatarBubbles', isHidden);
        updateVisibility();
    });
    
    // Apply on load
    updateVisibility();
    
    // Watch for dynamically added elements
    const observer = new MutationObserver(updateVisibility);
    observer.observe(document.body, { childList: true, subtree: true });
})();
</script>

</body>
</html>
